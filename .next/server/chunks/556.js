"use strict";exports.id=556,exports.ids=[556],exports.modules={316:(e,t,i)=>{i.d(t,{w:()=>n});var s=i(5730),r=i(42270);class n extends r.Ss{static [s.i]="PgViewBase"}},5730:(e,t,i)=>{i.d(t,{i:()=>s,is:()=>r});let s=Symbol.for("drizzle:entityKind");function r(e,t){if(!e||"object"!=typeof e)return!1;if(e instanceof t)return!0;if(!Object.prototype.hasOwnProperty.call(t,s))throw Error(`Class "${t.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let i=Object.getPrototypeOf(e).constructor;if(i)for(;i;){if(s in i&&i[s]===t[s])return!0;i=Object.getPrototypeOf(i)}return!1}Symbol.for("drizzle:hasOwnEntityKind")},9253:(e,t,i)=>{i.d(t,{KM:()=>o,vE:()=>d,xQ:()=>u});var s=i(5730),r=i(79608),n=i(51024),a=i(65734);class l extends a.u{static [s.i]="PgTimestampBuilder";constructor(e,t,i){super(e,"date","PgTimestamp"),this.config.withTimezone=t,this.config.precision=i}build(e){return new o(e,this.config)}}class o extends n.Kl{static [s.i]="PgTimestamp";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){let e=void 0===this.precision?"":` (${this.precision})`;return`timestamp${e}${this.withTimezone?" with time zone":""}`}mapFromDriverValue=e=>new Date(this.withTimezone?e:e+"+0000");mapToDriverValue=e=>e.toISOString()}class c extends a.u{static [s.i]="PgTimestampStringBuilder";constructor(e,t,i){super(e,"string","PgTimestampString"),this.config.withTimezone=t,this.config.precision=i}build(e){return new u(e,this.config)}}class u extends n.Kl{static [s.i]="PgTimestampString";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){let e=void 0===this.precision?"":`(${this.precision})`;return`timestamp${e}${this.withTimezone?" with time zone":""}`}}function d(e,t={}){let{name:i,config:s}=(0,r.Ll)(e,t);return s?.mode==="string"?new c(i,s.withTimezone??!1,s.precision):new l(i,s?.withTimezone??!1,s?.precision)}},9528:(e,t,i)=>{i.d(t,{Xd:()=>o,kB:()=>c});var s=i(5730),r=i(79608),n=i(51024),a=i(65734);class l extends a.u{constructor(e,t,i){super(e,"string","PgTime"),this.withTimezone=t,this.precision=i,this.config.withTimezone=t,this.config.precision=i}static [s.i]="PgTimeBuilder";build(e){return new o(e,this.config)}}class o extends n.Kl{static [s.i]="PgTime";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){let e=void 0===this.precision?"":`(${this.precision})`;return`time${e}${this.withTimezone?" with time zone":""}`}}function c(e,t={}){let{name:i,config:s}=(0,r.Ll)(e,t);return new l(i,s.withTimezone??!1,s.precision)}},9594:(e,t,i)=>{i.d(t,{dL:()=>l,uR:()=>o});var s=i(5730),r=i(42270),n=i(51024);class a extends n.pe{static [s.i]="PgUUIDBuilder";constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default((0,r.ll)`gen_random_uuid()`)}build(e){return new l(e,this.config)}}class l extends n.Kl{static [s.i]="PgUUID";getSQLType(){return"uuid"}}function o(e){return new a(e??"")}},10007:(e,t,i)=>{i.d(t,{V:()=>r});var s=i(5730);class r{constructor(e,t){this.table=e,this.config=t,this.name=t.name,this.keyAsName=t.keyAsName,this.notNull=t.notNull,this.default=t.default,this.defaultFn=t.defaultFn,this.onUpdateFn=t.onUpdateFn,this.hasDefault=t.hasDefault,this.primary=t.primaryKey,this.isUnique=t.isUnique,this.uniqueName=t.uniqueName,this.uniqueType=t.uniqueType,this.dataType=t.dataType,this.columnType=t.columnType,this.generated=t.generated,this.generatedIdentity=t.generatedIdentity}static [s.i]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return void 0!==this.config.generated&&"byDefault"!==this.config.generated.type}}},11238:(e,t,i)=>{i.d(t,{p:()=>X});var s=i(5730),r=i(84826),n=i(89685),a=i(10007),l=i(42270),o=i(67083),c=i(12772);class u{static [s.i]="SelectionProxyHandler";config;constructor(e){this.config={...e}}get(e,t){if("_"===t)return{...e._,selectedFields:new Proxy(e._.selectedFields,this)};if(t===c.n)return{...e[c.n],selectedFields:new Proxy(e[c.n].selectedFields,this)};if("symbol"==typeof t)return e[t];let i=((0,s.is)(e,o.n)?e._.selectedFields:(0,s.is)(e,l.Ss)?e[c.n].selectedFields:e)[t];if((0,s.is)(i,l.Xs.Aliased)){if("sql"===this.config.sqlAliasedBehavior&&!i.isSelectionField)return i.sql;let e=i.clone();return e.isSelectionField=!0,e}if((0,s.is)(i,l.Xs)){if("sql"===this.config.sqlBehavior)return i;throw Error(`You tried to reference "${t}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`)}return(0,s.is)(i,a.V)?this.config.alias?new Proxy(i,new n.Ht(new Proxy(i.table,new n.h_(this.config.alias,this.config.replaceOriginalName??!1)))):i:"object"!=typeof i||null===i?i:new Proxy(i,new u(this.config))}}var d=i(316);class f{static [s.i]="TypedQueryBuilder";getSelectedFields(){return this._.selectedFields}}class h{static [s.i]="QueryPromise";[Symbol.toStringTag]="QueryPromise";catch(e){return this.then(void 0,e)}finally(e){return this.then(t=>(e?.(),t),t=>{throw e?.(),t})}then(e,t){return this.execute().then(e,t)}}var x=i(24717),b=i(99511),g=i(79608),p=i(64386);function m(e){return(0,s.is)(e,p.mu)?[e[x.Sj]?`${e[x.Sj]}.${e[x.XI.Symbol.BaseName]}`:e[x.XI.Symbol.BaseName]]:(0,s.is)(e,o.n)?e._.usedTables??[]:(0,s.is)(e,l.Xs)?e.usedTables??[]:[]}class y{static [s.i]="PgSelectBuilder";fields;session;dialect;withList=[];distinct;constructor(e){this.fields=e.fields,this.session=e.session,this.dialect=e.dialect,e.withList&&(this.withList=e.withList),this.distinct=e.distinct}authToken;setToken(e){return this.authToken=e,this}from(e){let t,i=!!this.fields;return t=this.fields?this.fields:(0,s.is)(e,o.n)?Object.fromEntries(Object.keys(e._.selectedFields).map(t=>[t,e[t]])):(0,s.is)(e,d.w)?e[c.n].selectedFields:(0,s.is)(e,l.Xs)?{}:(0,g.YD)(e),new v({table:e,fields:t,isPartialSelect:i,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct}).setToken(this.authToken)}}class w extends f{static [s.i]="PgSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;cacheConfig=void 0;usedTables=new Set;constructor({table:e,fields:t,isPartialSelect:i,session:s,dialect:r,withList:n,distinct:a}){for(let l of(super(),this.config={withList:n,table:e,fields:{...t},distinct:a,setOperators:[]},this.isPartialSelect=i,this.session=s,this.dialect=r,this._={selectedFields:t,config:this.config},this.tableName=(0,g.zN)(e),this.joinsNotNullableMap="string"==typeof this.tableName?{[this.tableName]:!0}:{},m(e)))this.usedTables.add(l)}getUsedTables(){return[...this.usedTables]}createJoin(e,t){return(i,r)=>{let n=this.tableName,a=(0,g.zN)(i);for(let e of m(i))this.usedTables.add(e);if("string"==typeof a&&this.config.joins?.some(e=>e.alias===a))throw Error(`Alias "${a}" is already used in this query`);if(!this.isPartialSelect&&(1===Object.keys(this.joinsNotNullableMap).length&&"string"==typeof n&&(this.config.fields={[n]:this.config.fields}),"string"==typeof a&&!(0,s.is)(i,l.Xs))){let e=(0,s.is)(i,o.n)?i._.selectedFields:(0,s.is)(i,l.Ss)?i[c.n].selectedFields:i[x.XI.Symbol.Columns];this.config.fields[a]=e}if("function"==typeof r&&(r=r(new Proxy(this.config.fields,new u({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:r,table:i,joinType:e,alias:a,lateral:t}),"string"==typeof a)switch(e){case"left":this.joinsNotNullableMap[a]=!1;break;case"right":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([e])=>[e,!1])),this.joinsNotNullableMap[a]=!0;break;case"cross":case"inner":this.joinsNotNullableMap[a]=!0;break;case"full":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([e])=>[e,!1])),this.joinsNotNullableMap[a]=!1}return this}}leftJoin=this.createJoin("left",!1);leftJoinLateral=this.createJoin("left",!0);rightJoin=this.createJoin("right",!1);innerJoin=this.createJoin("inner",!1);innerJoinLateral=this.createJoin("inner",!0);fullJoin=this.createJoin("full",!1);crossJoin=this.createJoin("cross",!1);crossJoinLateral=this.createJoin("cross",!0);createSetOperator(e,t){return i=>{let s="function"==typeof i?i(T()):i;if(!(0,g.DV)(this.getSelectedFields(),s.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:e,isAll:t,rightSelect:s}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);intersectAll=this.createSetOperator("intersect",!0);except=this.createSetOperator("except",!1);exceptAll=this.createSetOperator("except",!0);addSetOperators(e){return this.config.setOperators.push(...e),this}where(e){return"function"==typeof e&&(e=e(new Proxy(this.config.fields,new u({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=e,this}having(e){return"function"==typeof e&&(e=e(new Proxy(this.config.fields,new u({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=e,this}groupBy(...e){if("function"==typeof e[0]){let t=e[0](new Proxy(this.config.fields,new u({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(t)?t:[t]}else this.config.groupBy=e;return this}orderBy(...e){if("function"==typeof e[0]){let t=e[0](new Proxy(this.config.fields,new u({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),i=Array.isArray(t)?t:[t];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=i:this.config.orderBy=i}else this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=e:this.config.orderBy=e;return this}limit(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=e:this.config.limit=e,this}offset(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=e:this.config.offset=e,this}for(e,t={}){return this.config.lockingClause={strength:e,config:t},this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}as(e){let t=[];if(t.push(...m(this.config.table)),this.config.joins)for(let e of this.config.joins)t.push(...m(e.table));return new Proxy(new o.n(this.getSQL(),this.config.fields,e,!1,[...new Set(t)]),new u({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new u({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}$withCache(e){return this.cacheConfig=void 0===e?{config:{},enable:!0,autoInvalidate:!0}:!1===e?{enable:!1}:{enable:!0,autoInvalidate:!0,...e},this}}class v extends w{static [s.i]="PgSelect";_prepare(e){let{session:t,config:i,dialect:s,joinsNotNullableMap:r,authToken:n,cacheConfig:a,usedTables:l}=this;if(!t)throw Error("Cannot execute a query on a query builder. Please use a database instance instead.");let{fields:o}=i;return b.k.startActiveSpan("drizzle.prepareQuery",()=>{let i=(0,g.He)(o),c=t.prepareQuery(s.sqlToQuery(this.getSQL()),i,e,!0,void 0,{type:"select",tables:[...l]},a);return c.joinsNotNullableMap=r,c.setToken(n)})}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>b.k.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken))}function S(e,t){return(i,s,...r)=>{let n=[s,...r].map(i=>({type:e,isAll:t,rightSelect:i}));for(let e of n)if(!(0,g.DV)(i.getSelectedFields(),e.rightSelect.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return i.addSetOperators(n)}}(0,g.XJ)(v,[h]);let T=()=>({union:$,unionAll:N,intersect:P,intersectAll:C,except:q,exceptAll:I}),$=S("union",!1),N=S("union",!0),P=S("intersect",!1),C=S("intersect",!0),q=S("except",!1),I=S("except",!0);class Q{static [s.i]="PgQueryBuilder";dialect;dialectConfig;constructor(e){this.dialect=(0,s.is)(e,r.s)?e:void 0,this.dialectConfig=(0,s.is)(e,r.s)?void 0:e}$with=(e,t)=>{let i=this;return{as:s=>("function"==typeof s&&(s=s(i)),new Proxy(new o.J(s.getSQL(),t??("getSelectedFields"in s?s.getSelectedFields()??{}:{}),e,!0),new u({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};with(...e){let t=this;return{select:function(i){return new y({fields:i??void 0,session:void 0,dialect:t.getDialect(),withList:e})},selectDistinct:function(e){return new y({fields:e??void 0,session:void 0,dialect:t.getDialect(),distinct:!0})},selectDistinctOn:function(e,i){return new y({fields:i??void 0,session:void 0,dialect:t.getDialect(),distinct:{on:e}})}}}select(e){return new y({fields:e??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(e){return new y({fields:e??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}selectDistinctOn(e,t){return new y({fields:t??void 0,session:void 0,dialect:this.getDialect(),distinct:{on:e}})}getDialect(){return this.dialect||(this.dialect=new r.s(this.dialectConfig)),this.dialect}}class L{constructor(e,t,i,s){this.table=e,this.session=t,this.dialect=i,this.withList=s}static [s.i]="PgUpdateBuilder";authToken;setToken(e){return this.authToken=e,this}set(e){return new j(this.table,(0,g.q)(this.table,e),this.session,this.dialect,this.withList).setToken(this.authToken)}}class j extends h{constructor(e,t,i,s,r){super(),this.session=i,this.dialect=s,this.config={set:t,table:e,withList:r,joins:[]},this.tableName=(0,g.zN)(e),this.joinsNotNullableMap="string"==typeof this.tableName?{[this.tableName]:!0}:{}}static [s.i]="PgUpdate";config;tableName;joinsNotNullableMap;cacheConfig;from(e){let t=(0,g.zN)(e);return"string"==typeof t&&(this.joinsNotNullableMap[t]=!0),this.config.from=e,this}getTableLikeFields(e){return(0,s.is)(e,p.mu)?e[x.XI.Symbol.Columns]:(0,s.is)(e,o.n)?e._.selectedFields:e[c.n].selectedFields}createJoin(e){return(t,i)=>{let r=(0,g.zN)(t);if("string"==typeof r&&this.config.joins.some(e=>e.alias===r))throw Error(`Alias "${r}" is already used in this query`);if("function"==typeof i){let e=this.config.from&&!(0,s.is)(this.config.from,l.Xs)?this.getTableLikeFields(this.config.from):void 0;i=i(new Proxy(this.config.table[x.XI.Symbol.Columns],new u({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})),e&&new Proxy(e,new u({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))}if(this.config.joins.push({on:i,table:t,joinType:e,alias:r}),"string"==typeof r)switch(e){case"left":this.joinsNotNullableMap[r]=!1;break;case"right":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([e])=>[e,!1])),this.joinsNotNullableMap[r]=!0;break;case"inner":this.joinsNotNullableMap[r]=!0;break;case"full":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([e])=>[e,!1])),this.joinsNotNullableMap[r]=!1}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");where(e){return this.config.where=e,this}returning(e){if(!e&&(e=Object.assign({},this.config.table[x.XI.Symbol.Columns]),this.config.from)){let t=(0,g.zN)(this.config.from);if("string"==typeof t&&this.config.from&&!(0,s.is)(this.config.from,l.Xs)){let i=this.getTableLikeFields(this.config.from);e[t]=i}for(let t of this.config.joins){let i=(0,g.zN)(t.table);if("string"==typeof i&&!(0,s.is)(t.table,l.Xs)){let s=this.getTableLikeFields(t.table);e[i]=s}}}return this.config.returningFields=e,this.config.returning=(0,g.He)(e),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){let t=this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0,void 0,{type:"insert",tables:m(this.config.table)},this.cacheConfig);return t.joinsNotNullableMap=this.joinsNotNullableMap,t}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>this._prepare().execute(e,this.authToken);getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new u({alias:(0,x.Io)(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}}class A{constructor(e,t,i,s,r){this.table=e,this.session=t,this.dialect=i,this.withList=s,this.overridingSystemValue_=r}static [s.i]="PgInsertBuilder";authToken;setToken(e){return this.authToken=e,this}overridingSystemValue(){return this.overridingSystemValue_=!0,this}values(e){if(0===(e=Array.isArray(e)?e:[e]).length)throw Error("values() must be called with at least one value");let t=e.map(e=>{let t={},i=this.table[x.XI.Symbol.Columns];for(let r of Object.keys(e)){let n=e[r];t[r]=(0,s.is)(n,l.Xs)?n:new l.Iw(n,i[r])}return t});return new D(this.table,t,this.session,this.dialect,this.withList,!1,this.overridingSystemValue_).setToken(this.authToken)}select(e){let t="function"==typeof e?e(new Q):e;if(!(0,s.is)(t,l.Xs)&&!(0,g.DV)(this.table[x.e],t._.selectedFields))throw Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new D(this.table,t,this.session,this.dialect,this.withList,!0)}}class D extends h{constructor(e,t,i,s,r,n,a){super(),this.session=i,this.dialect=s,this.config={table:e,values:t,withList:r,select:n,overridingSystemValue_:a}}static [s.i]="PgInsert";config;cacheConfig;returning(e=this.config.table[x.XI.Symbol.Columns]){return this.config.returningFields=e,this.config.returning=(0,g.He)(e),this}onConflictDoNothing(e={}){if(void 0===e.target)this.config.onConflict=(0,l.ll)`do nothing`;else{let t="";t=Array.isArray(e.target)?e.target.map(e=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(e))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(e.target));let i=e.where?(0,l.ll)` where ${e.where}`:void 0;this.config.onConflict=(0,l.ll)`(${l.ll.raw(t)})${i} do nothing`}return this}onConflictDoUpdate(e){if(e.where&&(e.targetWhere||e.setWhere))throw Error('You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.');let t=e.where?(0,l.ll)` where ${e.where}`:void 0,i=e.targetWhere?(0,l.ll)` where ${e.targetWhere}`:void 0,s=e.setWhere?(0,l.ll)` where ${e.setWhere}`:void 0,r=this.dialect.buildUpdateSet(this.config.table,(0,g.q)(this.config.table,e.set)),n="";return n=Array.isArray(e.target)?e.target.map(e=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(e))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(e.target)),this.config.onConflict=(0,l.ll)`(${l.ll.raw(n)})${i} do update set ${r}${t}${s}`,this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return b.k.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0,void 0,{type:"insert",tables:m(this.config.table)},this.cacheConfig))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>b.k.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken));getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new u({alias:(0,x.Io)(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}}class k extends h{constructor(e,t,i,s){super(),this.session=t,this.dialect=i,this.config={table:e,withList:s}}static [s.i]="PgDelete";config;cacheConfig;where(e){return this.config.where=e,this}returning(e=this.config.table[x.XI.Symbol.Columns]){return this.config.returningFields=e,this.config.returning=(0,g.He)(e),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return b.k.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0,void 0,{type:"delete",tables:m(this.config.table)},this.cacheConfig))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>b.k.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken));getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new u({alias:(0,x.Io)(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}}class z extends l.Xs{constructor(e){super(z.buildEmbeddedCount(e.source,e.filters).queryChunks),this.params=e,this.mapWith(Number),this.session=e.session,this.sql=z.buildCount(e.source,e.filters)}sql;token;static [s.i]="PgCountBuilder";[Symbol.toStringTag]="PgCountBuilder";session;static buildEmbeddedCount(e,t){return(0,l.ll)`(select count(*) from ${e}${l.ll.raw(" where ").if(t)}${t})`}static buildCount(e,t){return(0,l.ll)`select count(*) as count from ${e}${l.ll.raw(" where ").if(t)}${t};`}setToken(e){return this.token=e,this}then(e,t){return Promise.resolve(this.session.count(this.sql,this.token)).then(e,t)}catch(e){return this.then(void 0,e)}finally(e){return this.then(t=>(e?.(),t),t=>{throw e?.(),t})}}var O=i(39783);class B{constructor(e,t,i,s,r,n,a){this.fullSchema=e,this.schema=t,this.tableNamesMap=i,this.table=s,this.tableConfig=r,this.dialect=n,this.session=a}static [s.i]="PgRelationalQueryBuilder";findMany(e){return new F(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e||{},"many")}findFirst(e){return new F(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e?{...e,limit:1}:{limit:1},"first")}}class F extends h{constructor(e,t,i,s,r,n,a,l,o){super(),this.fullSchema=e,this.schema=t,this.tableNamesMap=i,this.table=s,this.tableConfig=r,this.dialect=n,this.session=a,this.config=l,this.mode=o}static [s.i]="PgRelationalQuery";_prepare(e){return b.k.startActiveSpan("drizzle.prepareQuery",()=>{let{query:t,builtQuery:i}=this._toSQL();return this.session.prepareQuery(i,void 0,e,!0,(e,i)=>{let s=e.map(e=>(0,O.I$)(this.schema,this.tableConfig,e,t.selection,i));return"first"===this.mode?s[0]:s})})}prepare(e){return this._prepare(e)}_getQuery(){return this.dialect.buildRelationalQueryWithoutPK({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName})}getSQL(){return this._getQuery().sql}_toSQL(){let e=this._getQuery(),t=this.dialect.sqlToQuery(e.sql);return{query:e,builtQuery:t}}toSQL(){return this._toSQL().builtQuery}authToken;setToken(e){return this.authToken=e,this}execute(){return b.k.startActiveSpan("drizzle.operation",()=>this._prepare().execute(void 0,this.authToken))}}class V extends h{constructor(e,t,i,s){super(),this.execute=e,this.sql=t,this.query=i,this.mapBatchResult=s}static [s.i]="PgRaw";getSQL(){return this.sql}getQuery(){return this.query}mapResult(e,t){return t?this.mapBatchResult(e):e}_prepare(){return this}isResponseInArrayMode(){return!1}}class E extends h{constructor(e,t,i){super(),this.session=t,this.dialect=i,this.config={view:e}}static [s.i]="PgRefreshMaterializedView";config;concurrently(){if(void 0!==this.config.withNoData)throw Error("Cannot use concurrently and withNoData together");return this.config.concurrently=!0,this}withNoData(){if(void 0!==this.config.concurrently)throw Error("Cannot use concurrently and withNoData together");return this.config.withNoData=!0,this}getSQL(){return this.dialect.buildRefreshMaterializedViewQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return b.k.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),void 0,e,!0))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>b.k.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken))}class X{constructor(e,t,i){if(this.dialect=e,this.session=t,this._=i?{schema:i.schema,fullSchema:i.fullSchema,tableNamesMap:i.tableNamesMap,session:t}:{schema:void 0,fullSchema:{},tableNamesMap:{},session:t},this.query={},this._.schema)for(let[s,r]of Object.entries(this._.schema))this.query[s]=new B(i.fullSchema,this._.schema,this._.tableNamesMap,i.fullSchema[s],r,e,t);this.$cache={invalidate:async e=>{}}}static [s.i]="PgDatabase";query;$with=(e,t)=>{let i=this;return{as:s=>("function"==typeof s&&(s=s(new Q(i.dialect))),new Proxy(new o.J(s.getSQL(),t??("getSelectedFields"in s?s.getSelectedFields()??{}:{}),e,!0),new u({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};$count(e,t){return new z({source:e,filters:t,session:this.session})}$cache;with(...e){let t=this;return{select:function(i){return new y({fields:i??void 0,session:t.session,dialect:t.dialect,withList:e})},selectDistinct:function(i){return new y({fields:i??void 0,session:t.session,dialect:t.dialect,withList:e,distinct:!0})},selectDistinctOn:function(i,s){return new y({fields:s??void 0,session:t.session,dialect:t.dialect,withList:e,distinct:{on:i}})},update:function(i){return new L(i,t.session,t.dialect,e)},insert:function(i){return new A(i,t.session,t.dialect,e)},delete:function(i){return new k(i,t.session,t.dialect,e)}}}select(e){return new y({fields:e??void 0,session:this.session,dialect:this.dialect})}selectDistinct(e){return new y({fields:e??void 0,session:this.session,dialect:this.dialect,distinct:!0})}selectDistinctOn(e,t){return new y({fields:t??void 0,session:this.session,dialect:this.dialect,distinct:{on:e}})}update(e){return new L(e,this.session,this.dialect)}insert(e){return new A(e,this.session,this.dialect)}delete(e){return new k(e,this.session,this.dialect)}refreshMaterializedView(e){return new E(e,this.session,this.dialect)}authToken;execute(e){let t="string"==typeof e?l.ll.raw(e):e.getSQL(),i=this.dialect.sqlToQuery(t),s=this.session.prepareQuery(i,void 0,void 0,!1);return new V(()=>s.execute(void 0,this.authToken),t,i,e=>s.mapResult(e,!0))}transaction(e,t){return this.session.transaction(e,t)}}},12772:(e,t,i)=>{i.d(t,{n:()=>s});let s=Symbol.for("drizzle:ViewBaseConfig")},21558:(e,t,i)=>{i.d(t,{XO:()=>u,uC:()=>d,yK:()=>f});var s=i(88520),r=i(5730),n=i(40774);class a extends Error{constructor(e,t,i){super(`Failed query: ${e}
params: ${t}`),this.query=e,this.params=t,this.cause=i,Error.captureStackTrace(this,a),i&&(this.cause=i)}}var l=i(42270),o=i(99511),c=i(11238);class u{constructor(e,t,i,s){this.query=e,this.cache=t,this.queryMetadata=i,this.cacheConfig=s,t&&"all"===t.strategy()&&void 0===s&&(this.cacheConfig={enable:!0,autoInvalidate:!0}),this.cacheConfig?.enable||(this.cacheConfig=void 0)}authToken;getQuery(){return this.query}mapResult(e,t){return e}setToken(e){return this.authToken=e,this}static [r.i]="PgPreparedQuery";joinsNotNullableMap;async queryWithCache(e,t,i){if(void 0===this.cache||(0,r.is)(this.cache,s.Th)||void 0===this.queryMetadata||this.cacheConfig&&!this.cacheConfig.enable)try{return await i()}catch(i){throw new a(e,t,i)}if(("insert"===this.queryMetadata.type||"update"===this.queryMetadata.type||"delete"===this.queryMetadata.type)&&this.queryMetadata.tables.length>0)try{let[e]=await Promise.all([i(),this.cache.onMutate({tables:this.queryMetadata.tables})]);return e}catch(i){throw new a(e,t,i)}if(!this.cacheConfig)try{return await i()}catch(i){throw new a(e,t,i)}if("select"===this.queryMetadata.type){let r=await this.cache.get(this.cacheConfig.tag??await (0,s.h1)(e,t),this.queryMetadata.tables,void 0!==this.cacheConfig.tag,this.cacheConfig.autoInvalidate);if(void 0===r){let r;try{r=await i()}catch(i){throw new a(e,t,i)}return await this.cache.put(this.cacheConfig.tag??await (0,s.h1)(e,t),r,this.cacheConfig.autoInvalidate?this.queryMetadata.tables:[],void 0!==this.cacheConfig.tag,this.cacheConfig.config),r}return r}try{return await i()}catch(i){throw new a(e,t,i)}}}class d{constructor(e){this.dialect=e}static [r.i]="PgSession";execute(e,t){return o.k.startActiveSpan("drizzle.operation",()=>o.k.startActiveSpan("drizzle.prepareQuery",()=>this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0,!1)).setToken(t).execute(void 0,t))}all(e){return this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0,!1).all()}async count(e,t){return Number((await this.execute(e,t))[0].count)}}class f extends c.p{constructor(e,t,i,s=0){super(e,t,i),this.schema=i,this.nestedIndex=s}static [r.i]="PgTransaction";rollback(){throw new n.j}getTransactionConfigSQL(e){let t=[];return e.isolationLevel&&t.push(`isolation level ${e.isolationLevel}`),e.accessMode&&t.push(e.accessMode),"boolean"==typeof e.deferrable&&t.push(e.deferrable?"deferrable":"not deferrable"),l.ll.raw(t.join(" "))}setTransaction(e){return this.session.execute((0,l.ll)`set transaction ${this.getTransactionConfigSQL(e)}`)}}},24717:(e,t,i)=>{i.d(t,{HE:()=>u,Io:()=>x,Lf:()=>b,Sj:()=>n,XI:()=>h,e:()=>a});var s=i(5730),r=i(86214);let n=Symbol.for("drizzle:Schema"),a=Symbol.for("drizzle:Columns"),l=Symbol.for("drizzle:ExtraConfigColumns"),o=Symbol.for("drizzle:OriginalName"),c=Symbol.for("drizzle:BaseName"),u=Symbol.for("drizzle:IsAlias"),d=Symbol.for("drizzle:ExtraConfigBuilder"),f=Symbol.for("drizzle:IsDrizzleTable");class h{static [s.i]="Table";static Symbol={Name:r.E,Schema:n,OriginalName:o,Columns:a,ExtraConfigColumns:l,BaseName:c,IsAlias:u,ExtraConfigBuilder:d};[r.E];[o];[n];[a];[l];[c];[u]=!1;[f]=!0;[d]=void 0;constructor(e,t,i){this[r.E]=this[o]=e,this[n]=t,this[c]=i}}function x(e){return e[r.E]}function b(e){return`${e[n]??"public"}.${e[r.E]}`}},26594:(e,t,i)=>{i.a(e,async(e,s)=>{try{i.d(t,{_q:()=>g});var r=i(64939),n=i(88520),a=i(5730),l=i(86901),o=i(21558),c=i(42270),u=i(99511),d=i(79608),f=e([r]);let{Pool:h,types:x}=(r=(f.then?(await f)():f)[0]).default;class b extends o.XO{constructor(e,t,i,s,r,n,a,l,o,c,u){super({sql:t,params:i},r,n,a),this.client=e,this.queryString=t,this.params=i,this.logger=s,this.fields=l,this._isResponseInArrayMode=c,this.customResultMapper=u,this.rawQueryConfig={name:o,text:t,types:{getTypeParser:(e,t)=>e===x.builtins.TIMESTAMPTZ||e===x.builtins.TIMESTAMP||e===x.builtins.DATE||e===x.builtins.INTERVAL||1231===e||1115===e||1185===e||1187===e||1182===e?e=>e:x.getTypeParser(e,t)}},this.queryConfig={name:o,text:t,rowMode:"array",types:{getTypeParser:(e,t)=>e===x.builtins.TIMESTAMPTZ||e===x.builtins.TIMESTAMP||e===x.builtins.DATE||e===x.builtins.INTERVAL||1231===e||1115===e||1185===e||1187===e||1182===e?e=>e:x.getTypeParser(e,t)}}}static [a.i]="NodePgPreparedQuery";rawQueryConfig;queryConfig;async execute(e={}){return u.k.startActiveSpan("drizzle.execute",async()=>{let t=(0,c.Ct)(this.params,e);this.logger.logQuery(this.rawQueryConfig.text,t);let{fields:i,rawQueryConfig:s,client:r,queryConfig:n,joinsNotNullableMap:a,customResultMapper:l}=this;if(!i&&!l)return u.k.startActiveSpan("drizzle.driver.execute",async e=>(e?.setAttributes({"drizzle.query.name":s.name,"drizzle.query.text":s.text,"drizzle.query.params":JSON.stringify(t)}),this.queryWithCache(s.text,t,async()=>await r.query(s,t))));let o=await u.k.startActiveSpan("drizzle.driver.execute",e=>(e?.setAttributes({"drizzle.query.name":n.name,"drizzle.query.text":n.text,"drizzle.query.params":JSON.stringify(t)}),this.queryWithCache(n.text,t,async()=>await r.query(n,t))));return u.k.startActiveSpan("drizzle.mapResponse",()=>l?l(o.rows):o.rows.map(e=>(0,d.a6)(i,e,a)))})}all(e={}){return u.k.startActiveSpan("drizzle.execute",()=>{let t=(0,c.Ct)(this.params,e);return this.logger.logQuery(this.rawQueryConfig.text,t),u.k.startActiveSpan("drizzle.driver.execute",e=>(e?.setAttributes({"drizzle.query.name":this.rawQueryConfig.name,"drizzle.query.text":this.rawQueryConfig.text,"drizzle.query.params":JSON.stringify(t)}),this.queryWithCache(this.rawQueryConfig.text,t,async()=>this.client.query(this.rawQueryConfig,t)).then(e=>e.rows)))})}isResponseInArrayMode(){return this._isResponseInArrayMode}}class g extends o.uC{constructor(e,t,i,s={}){super(t),this.client=e,this.schema=i,this.options=s,this.logger=s.logger??new l.Pv,this.cache=s.cache??new n.Th}static [a.i]="NodePgSession";logger;cache;prepareQuery(e,t,i,s,r,n,a){return new b(this.client,e.sql,e.params,this.logger,this.cache,n,a,t,i,s,r)}async transaction(e,t){let i=this.client instanceof h?new g(await this.client.connect(),this.dialect,this.schema,this.options):this,s=new p(this.dialect,i,this.schema);await s.execute((0,c.ll)`begin${t?(0,c.ll)` ${s.getTransactionConfigSQL(t)}`:void 0}`);try{let t=await e(s);return await s.execute((0,c.ll)`commit`),t}catch(e){throw await s.execute((0,c.ll)`rollback`),e}finally{this.client instanceof h&&i.client.release()}}async count(e){let t=await this.execute(e);return Number(t.rows[0].count)}}class p extends o.yK{static [a.i]="NodePgTransaction";async transaction(e){let t=`sp${this.nestedIndex+1}`,i=new p(this.dialect,this.session,this.schema,this.nestedIndex+1);await i.execute(c.ll.raw(`savepoint ${t}`));try{let s=await e(i);return await i.execute(c.ll.raw(`release savepoint ${t}`)),s}catch(e){throw await i.execute(c.ll.raw(`rollback to savepoint ${t}`)),e}}}s()}catch(e){s(e)}})},29334:(e,t,i)=>{i.d(t,{Qq:()=>o});var s=i(5730),r=i(79608),n=i(51024);class a extends n.pe{static [s.i]="PgTextBuilder";constructor(e,t){super(e,"string","PgText"),this.config.enumValues=t.enum}build(e){return new l(e,this.config)}}class l extends n.Kl{static [s.i]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}}function o(e,t={}){let{name:i,config:s}=(0,r.Ll)(e,t);return new a(i,s)}},34359:(e,t,i)=>{i.d(t,{Pq:()=>l,iX:()=>a});var s=i(5730),r=i(51024);class n extends r.pe{static [s.i]="PgJsonBuilder";constructor(e){super(e,"json","PgJson")}build(e){return new a(e,this.config)}}class a extends r.Kl{static [s.i]="PgJson";constructor(e,t){super(e,t)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if("string"==typeof e)try{return JSON.parse(e)}catch{}return e}}function l(e){return new n(e??"")}},34509:(e,t,i)=>{i.d(t,{Fx:()=>l,kn:()=>a});var s=i(5730),r=i(51024);class n extends r.pe{static [s.i]="PgJsonbBuilder";constructor(e){super(e,"json","PgJsonb")}build(e){return new a(e,this.config)}}class a extends r.Kl{static [s.i]="PgJsonb";constructor(e,t){super(e,t)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if("string"==typeof e)try{return JSON.parse(e)}catch{}return e}}function l(e){return new n(e??"")}},37193:(e,t,i)=>{i.d(t,{dw:()=>u,p6:()=>d,qw:()=>o});var s=i(5730),r=i(79608),n=i(51024),a=i(65734);class l extends a.u{static [s.i]="PgDateBuilder";constructor(e){super(e,"date","PgDate")}build(e){return new o(e,this.config)}}class o extends n.Kl{static [s.i]="PgDate";getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}class c extends a.u{static [s.i]="PgDateStringBuilder";constructor(e){super(e,"string","PgDateString")}build(e){return new u(e,this.config)}}class u extends n.Kl{static [s.i]="PgDateString";getSQLType(){return"date"}}function d(e,t){let{name:i,config:s}=(0,r.Ll)(e,t);return s?.mode==="date"?new l(i):new c(i)}},39783:(e,t,i)=>{i.d(t,{iv:()=>g,pD:()=>b,DZ:()=>S,_k:()=>y,mm:()=>p,rl:()=>m,I$:()=>function e(t,i,s,a,l=e=>e){let o={};for(let[c,d]of a.entries())if(d.isJson){let r=i.relations[d.tsKey],a=s[c],u="string"==typeof a?JSON.parse(a):a;o[d.tsKey]=(0,n.is)(r,b)?u&&e(t,t[d.relationTableTsKey],u,d.selection,l):u.map(i=>e(t,t[d.relationTableTsKey],i,d.selection,l))}else{let e,t=l(s[c]),i=d.field;e=(0,n.is)(i,r.V)?i:(0,n.is)(i,u.Xs)?i.decoder:i.sql.decoder,o[d.tsKey]=null===t?null:e.mapFromDriverValue(t)}return o},W0:()=>v,K1:()=>w});var s=i(24717),r=i(10007),n=i(5730),a=i(64386);class l{static [n.i]="PgPrimaryKeyBuilder";columns;name;constructor(e,t){this.columns=e,this.name=t}build(e){return new o(e,this.columns,this.name)}}class o{constructor(e,t,i){this.table=e,this.columns=t,this.name=i}static [n.i]="PgPrimaryKey";columns;name;getName(){return this.name??`${this.table[a.mu.Symbol.Name]}_${this.columns.map(e=>e.name).join("_")}_pk`}}var c=i(94634),u=i(42270);function d(e){return(0,u.ll)`${e} asc`}function f(e){return(0,u.ll)`${e} desc`}class h{constructor(e,t,i){this.sourceTable=e,this.referencedTable=t,this.relationName=i,this.referencedTableName=t[s.XI.Symbol.Name]}static [n.i]="Relation";referencedTableName;fieldName}class x{constructor(e,t){this.table=e,this.config=t}static [n.i]="Relations"}class b extends h{constructor(e,t,i,s){super(e,t,i?.relationName),this.config=i,this.isNullable=s}static [n.i]="One";withFieldName(e){let t=new b(this.sourceTable,this.referencedTable,this.config,this.isNullable);return t.fieldName=e,t}}class g extends h{constructor(e,t,i){super(e,t,i?.relationName),this.config=i}static [n.i]="Many";withFieldName(e){let t=new g(this.sourceTable,this.referencedTable,this.config);return t.fieldName=e,t}}function p(){return{and:c.Uo,between:c.Tq,eq:c.eq,exists:c.t2,gt:c.gt,gte:c.RO,ilike:c.B3,inArray:c.RV,isNull:c.kZ,isNotNull:c.Pe,like:c.mj,lt:c.lt,lte:c.wJ,ne:c.ne,not:c.AU,notBetween:c.o8,notExists:c.KJ,notLike:c.RK,notIlike:c.q1,notInArray:c.KL,or:c.or,sql:u.ll}}function m(){return{sql:u.ll,asc:d,desc:f}}function y(e,t){1===Object.keys(e).length&&"default"in e&&!(0,n.is)(e.default,s.XI)&&(e=e.default);let i={},r={},a={};for(let[o,c]of Object.entries(e))if((0,n.is)(c,s.XI)){let e=(0,s.Lf)(c),t=r[e];for(let r of(i[e]=o,a[o]={tsName:o,dbName:c[s.XI.Symbol.Name],schema:c[s.XI.Symbol.Schema],columns:c[s.XI.Symbol.Columns],relations:t?.relations??{},primaryKey:t?.primaryKey??[]},Object.values(c[s.XI.Symbol.Columns])))r.primary&&a[o].primaryKey.push(r);let u=c[s.XI.Symbol.ExtraConfigBuilder]?.(c[s.XI.Symbol.ExtraConfigColumns]);if(u)for(let e of Object.values(u))(0,n.is)(e,l)&&a[o].primaryKey.push(...e.columns)}else if((0,n.is)(c,x)){let e,n=(0,s.Lf)(c.table),l=i[n];for(let[i,s]of Object.entries(c.config(t(c.table))))if(l){let t=a[l];t.relations[i]=s,e&&t.primaryKey.push(...e)}else n in r||(r[n]={relations:{},primaryKey:e}),r[n].relations[i]=s}return{tables:a,tableNamesMap:i}}function w(e,t){return new x(e,e=>Object.fromEntries(Object.entries(t(e)).map(([e,t])=>[e,t.withFieldName(e)])))}function v(e,t,i){if((0,n.is)(i,b)&&i.config)return{fields:i.config.fields,references:i.config.references};let r=t[(0,s.Lf)(i.referencedTable)];if(!r)throw Error(`Table "${i.referencedTable[s.XI.Symbol.Name]}" not found in schema`);let a=e[r];if(!a)throw Error(`Table "${r}" not found in schema`);let l=i.sourceTable,o=t[(0,s.Lf)(l)];if(!o)throw Error(`Table "${l[s.XI.Symbol.Name]}" not found in schema`);let c=[];for(let e of Object.values(a.relations))(i.relationName&&i!==e&&e.relationName===i.relationName||!i.relationName&&e.referencedTable===i.sourceTable)&&c.push(e);if(c.length>1)throw i.relationName?Error(`There are multiple relations with name "${i.relationName}" in table "${r}"`):Error(`There are multiple relations between "${r}" and "${i.sourceTable[s.XI.Symbol.Name]}". Please specify relation name`);if(c[0]&&(0,n.is)(c[0],b)&&c[0].config)return{fields:c[0].config.references,references:c[0].config.fields};throw Error(`There is not enough information to infer relation "${o}.${i.fieldName}"`)}function S(e){return{one:function(t,i){return new b(e,t,i,i?.fields.reduce((e,t)=>e&&t.notNull,!0)??!1)},many:function(t,i){return new g(e,t,i)}}}},40774:(e,t,i)=>{i.d(t,{j:()=>n,n:()=>r});var s=i(5730);class r extends Error{static [s.i]="DrizzleError";constructor({message:e,cause:t}){super(e),this.name="DrizzleError",this.cause=t}}class n extends r{static [s.i]="TransactionRollbackError";constructor(){super({message:"Rollback"})}}},42270:(e,t,i)=>{i.d(t,{Ct:()=>v,DJ:()=>f,Iw:()=>m,Or:()=>w,Ss:()=>T,Xs:()=>h,eG:()=>b,ll:()=>y,qt:()=>d});var s=i(5730),r=i(88544),n=i(67083),a=i(99511),l=i(12772),o=i(10007),c=i(24717);class u{static [s.i]=null}function d(e){return null!=e&&"function"==typeof e.getSQL}class f{static [s.i]="StringChunk";value;constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new h([this])}}class h{constructor(e){for(let t of(this.queryChunks=e,e))if((0,s.is)(t,c.XI)){let e=t[c.XI.Symbol.Schema];this.usedTables.push(void 0===e?t[c.XI.Symbol.Name]:e+"."+t[c.XI.Symbol.Name])}}static [s.i]="SQL";decoder=g;shouldInlineParams=!1;usedTables=[];append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return a.k.startActiveSpan("drizzle.buildSQL",t=>{let i=this.buildQueryFromSourceParams(this.queryChunks,e);return t?.setAttributes({"drizzle.query.text":i.sql,"drizzle.query.params":JSON.stringify(i.params)}),i})}buildQueryFromSourceParams(e,t){let i=Object.assign({},t,{inlineParams:t.inlineParams||this.shouldInlineParams,paramStartIndex:t.paramStartIndex||{value:0}}),{casing:a,escapeName:u,escapeParam:b,prepareTyping:g,inlineParams:p,paramStartIndex:y}=i;var v=e.map(e=>{if((0,s.is)(e,f))return{sql:e.value.join(""),params:[]};if((0,s.is)(e,x))return{sql:u(e.value),params:[]};if(void 0===e)return{sql:"",params:[]};if(Array.isArray(e)){let t=[new f("(")];for(let[i,s]of e.entries())t.push(s),i<e.length-1&&t.push(new f(", "));return t.push(new f(")")),this.buildQueryFromSourceParams(t,i)}if((0,s.is)(e,h))return this.buildQueryFromSourceParams(e.queryChunks,{...i,inlineParams:p||e.shouldInlineParams});if((0,s.is)(e,c.XI)){let t=e[c.XI.Symbol.Schema],i=e[c.XI.Symbol.Name];return{sql:void 0===t||e[c.HE]?u(i):u(t)+"."+u(i),params:[]}}if((0,s.is)(e,o.V)){let i=a.getColumnCasing(e);if("indexes"===t.invokeSource)return{sql:u(i),params:[]};let s=e.table[c.XI.Symbol.Schema];return{sql:e.table[c.HE]||void 0===s?u(e.table[c.XI.Symbol.Name])+"."+u(i):u(s)+"."+u(e.table[c.XI.Symbol.Name])+"."+u(i),params:[]}}if((0,s.is)(e,T)){let t=e[l.n].schema,i=e[l.n].name;return{sql:void 0===t||e[l.n].isAlias?u(i):u(t)+"."+u(i),params:[]}}if((0,s.is)(e,m)){if((0,s.is)(e.value,w))return{sql:b(y.value++,e),params:[e],typings:["none"]};let t=null===e.value?null:e.encoder.mapToDriverValue(e.value);if((0,s.is)(t,h))return this.buildQueryFromSourceParams([t],i);if(p)return{sql:this.mapInlineParam(t,i),params:[]};let r=["none"];return g&&(r=[g(e.encoder)]),{sql:b(y.value++,t),params:[t],typings:r}}return(0,s.is)(e,w)?{sql:b(y.value++,e),params:[e],typings:["none"]}:(0,s.is)(e,h.Aliased)&&void 0!==e.fieldAlias?{sql:u(e.fieldAlias),params:[]}:(0,s.is)(e,n.n)?e._.isWith?{sql:u(e._.alias),params:[]}:this.buildQueryFromSourceParams([new f("("),e._.sql,new f(") "),new x(e._.alias)],i):(0,r.BU)(e)?e.schema?{sql:u(e.schema)+"."+u(e.enumName),params:[]}:{sql:u(e.enumName),params:[]}:d(e)?e.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([e.getSQL()],i):this.buildQueryFromSourceParams([new f("("),e.getSQL(),new f(")")],i):p?{sql:this.mapInlineParam(e,i),params:[]}:{sql:b(y.value++,e),params:[e],typings:["none"]}});let S={sql:"",params:[]};for(let e of v)S.sql+=e.sql,S.params.push(...e.params),e.typings?.length&&(S.typings||(S.typings=[]),S.typings.push(...e.typings));return S}mapInlineParam(e,{escapeString:t}){if(null===e)return"null";if("number"==typeof e||"boolean"==typeof e)return e.toString();if("string"==typeof e)return t(e);if("object"==typeof e){let i=e.toString();return"[object Object]"===i?t(JSON.stringify(e)):t(i)}throw Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return void 0===e?this:new h.Aliased(this,e)}mapWith(e){return this.decoder="function"==typeof e?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}}class x{constructor(e){this.value=e}static [s.i]="Name";brand;getSQL(){return new h([this])}}function b(e){return"object"==typeof e&&null!==e&&"mapToDriverValue"in e&&"function"==typeof e.mapToDriverValue}let g={mapFromDriverValue:e=>e},p={mapToDriverValue:e=>e};({...g,...p});class m{constructor(e,t=p){this.value=e,this.encoder=t}static [s.i]="Param";brand;getSQL(){return new h([this])}}function y(e,...t){let i=[];for(let[s,r]of((t.length>0||e.length>0&&""!==e[0])&&i.push(new f(e[0])),t.entries()))i.push(r,new f(e[s+1]));return new h(i)}(e=>{e.empty=function(){return new h([])},e.fromList=function(e){return new h(e)},e.raw=function(e){return new h([new f(e)])},e.join=function(e,t){let i=[];for(let[s,r]of e.entries())s>0&&void 0!==t&&i.push(t),i.push(r);return new h(i)},e.identifier=function(e){return new x(e)},e.placeholder=function(e){return new w(e)},e.param=function(e,t){return new m(e,t)}})(y||(y={})),(e=>{class t{constructor(e,t){this.sql=e,this.fieldAlias=t}static [s.i]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new t(this.sql,this.fieldAlias)}}e.Aliased=t})(h||(h={}));class w{constructor(e){this.name=e}static [s.i]="Placeholder";getSQL(){return new h([this])}}function v(e,t){return e.map(e=>{if((0,s.is)(e,w)){if(!(e.name in t))throw Error(`No value for placeholder "${e.name}" was provided`);return t[e.name]}if((0,s.is)(e,m)&&(0,s.is)(e.value,w)){if(!(e.value.name in t))throw Error(`No value for placeholder "${e.value.name}" was provided`);return e.encoder.mapToDriverValue(t[e.value.name])}return e})}let S=Symbol.for("drizzle:IsDrizzleView");class T{static [s.i]="View";[l.n];[S]=!0;constructor({name:e,schema:t,selectedFields:i,query:s}){this[l.n]={name:e,originalName:e,schema:t,selectedFields:i,query:s,isExisting:!s,isAlias:!1}}getSQL(){return new h([this])}}o.V.prototype.getSQL=function(){return new h([this])},c.XI.prototype.getSQL=function(){return new h([this])},n.n.prototype.getSQL=function(){return new h([this])}},51024:(e,t,i)=>{i.d(t,{ae:()=>m,Kl:()=>g,pe:()=>b});var s=i(5730);class r{static [s.i]="ColumnBuilder";config;constructor(e,t,i){this.config={name:e,keyAsName:""===e,notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:t,columnType:i,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){""===this.config.name&&(this.config.name=e)}}var n=i(10007),a=i(86214);class l{static [s.i]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(e,t){this.reference=()=>{let{name:t,columns:i,foreignColumns:s}=e();return{name:t,columns:i,foreignTable:s[0].table,foreignColumns:s}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}onUpdate(e){return this._onUpdate=void 0===e?"no action":e,this}onDelete(e){return this._onDelete=void 0===e?"no action":e,this}build(e){return new o(e,this)}}class o{constructor(e,t){this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}static [s.i]="PgForeignKey";reference;onUpdate;onDelete;getName(){let{name:e,columns:t,foreignColumns:i}=this.reference(),s=t.map(e=>e.name),r=i.map(e=>e.name),n=[this.table[a.E],...s,i[0].table[a.E],...r];return e??`${n.join("_")}_fk`}}var c=i(69167);function u(e,t){return`${e[a.E]}_${t.join("_")}_unique`}class d{constructor(e,t){this.name=t,this.columns=e}static [s.i]=null;columns;nullsNotDistinctConfig=!1;nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(e){return new h(e,this.columns,this.nullsNotDistinctConfig,this.name)}}class f{static [s.i]=null;name;constructor(e){this.name=e}on(...e){return new d(e,this.name)}}class h{constructor(e,t,i,s){this.table=e,this.columns=t,this.name=s??u(this.table,this.columns.map(e=>e.name)),this.nullsNotDistinct=i}static [s.i]=null;columns;name;nullsNotDistinct=!1;getName(){return this.name}}function x(e,t,i){for(let s=t;s<e.length;s++){let r=e[s];if("\\"===r){s++;continue}if('"'===r)return[e.slice(t,s).replace(/\\/g,""),s+1];if(!i&&(","===r||"}"===r))return[e.slice(t,s).replace(/\\/g,""),s]}return[e.slice(t).replace(/\\/g,""),e.length]}class b extends r{foreignKeyConfigs=[];static [s.i]="PgColumnBuilder";array(e){return new y(this.config.name,this,e)}references(e,t={}){return this.foreignKeyConfigs.push({ref:e,actions:t}),this}unique(e,t){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=t?.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,t){return this.foreignKeyConfigs.map(({ref:i,actions:s})=>(0,c.i)((i,s)=>{let r=new l(()=>({columns:[e],foreignColumns:[i()]}));return s.onUpdate&&r.onUpdate(s.onUpdate),s.onDelete&&r.onDelete(s.onDelete),r.build(t)},i,s))}buildExtraConfigColumn(e){return new p(e,this.config)}}class g extends n.V{constructor(e,t){t.uniqueName||(t.uniqueName=u(e,[t.name])),super(e,t),this.table=e}static [s.i]="PgColumn"}class p extends g{static [s.i]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}}class m{static [s.i]="IndexedColumn";constructor(e,t,i,s){this.name=e,this.keyAsName=t,this.type=i,this.indexConfig=s}name;keyAsName;type;indexConfig}class y extends b{static [s.i]="PgArrayBuilder";constructor(e,t,i){super(e,"array","PgArray"),this.config.baseBuilder=t,this.config.size=i}build(e){let t=this.config.baseBuilder.build(e);return new w(e,this.config,t)}}class w extends g{constructor(e,t,i,s){super(e,t),this.baseColumn=i,this.range=s,this.size=t.size}size;static [s.i]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${"number"==typeof this.size?this.size:""}]`}mapFromDriverValue(e){return"string"==typeof e&&(e=function(e){let[t]=function e(t,i=0){let s=[],r=i,n=!1;for(;r<t.length;){let a=t[r];if(","===a){(n||r===i)&&s.push(""),n=!0,r++;continue}if(n=!1,"\\"===a){r+=2;continue}if('"'===a){let[e,i]=x(t,r+1,!0);s.push(e),r=i;continue}if("}"===a)return[s,r+1];if("{"===a){let[i,n]=e(t,r+1);s.push(i),r=n;continue}let[l,o]=x(t,r,!1);s.push(l),r=o}return[s,r]}(e,1);return t}(e)),e.map(e=>this.baseColumn.mapFromDriverValue(e))}mapToDriverValue(e,t=!1){let i=e.map(e=>null===e?null:(0,s.is)(this.baseColumn,w)?this.baseColumn.mapToDriverValue(e,!0):this.baseColumn.mapToDriverValue(e));return t?i:function e(t){return`{${t.map(t=>Array.isArray(t)?e(t):"string"==typeof t?`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${t}`).join(",")}}`}(i)}}},54693:(e,t,i)=>{i.d(t,{zM:()=>l});var s=i(5730),r=i(51024);class n extends r.pe{static [s.i]="PgBooleanBuilder";constructor(e){super(e,"boolean","PgBoolean")}build(e){return new a(e,this.config)}}class a extends r.Kl{static [s.i]="PgBoolean";getSQLType(){return"boolean"}}function l(e){return new n(e??"")}},63431:(e,t,i)=>{i.d(t,{nd:()=>o});var s=i(5730),r=i(51024),n=i(68449);class a extends n.p{static [s.i]="PgIntegerBuilder";constructor(e){super(e,"number","PgInteger")}build(e){return new l(e,this.config)}}class l extends r.Kl{static [s.i]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(e){return"string"==typeof e?Number.parseInt(e):e}}function o(e){return new a(e??"")}},64386:(e,t,i)=>{i.d(t,{mu:()=>eX,cJ:()=>eK});var s=i(5730),r=i(24717),n=i(79608),a=i(51024),l=i(68449);class o extends l.p{static [s.i]="PgBigInt53Builder";constructor(e){super(e,"number","PgBigInt53")}build(e){return new c(e,this.config)}}class c extends a.Kl{static [s.i]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(e){return"number"==typeof e?e:Number(e)}}class u extends l.p{static [s.i]="PgBigInt64Builder";constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new d(e,this.config)}}class d extends a.Kl{static [s.i]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}function f(e,t){let{name:i,config:s}=(0,n.Ll)(e,t);return"number"===s.mode?new o(i):new u(i)}class h extends a.pe{static [s.i]="PgBigSerial53Builder";constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new x(e,this.config)}}class x extends a.Kl{static [s.i]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(e){return"number"==typeof e?e:Number(e)}}class b extends a.pe{static [s.i]="PgBigSerial64Builder";constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new g(e,this.config)}}class g extends a.Kl{static [s.i]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}function p(e,t){let{name:i,config:s}=(0,n.Ll)(e,t);return"number"===s.mode?new h(i):new b(i)}var m=i(54693);class y extends a.pe{static [s.i]="PgCharBuilder";constructor(e,t){super(e,"string","PgChar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new w(e,this.config)}}class w extends a.Kl{static [s.i]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return void 0===this.length?"char":`char(${this.length})`}}function v(e,t={}){let{name:i,config:s}=(0,n.Ll)(e,t);return new y(i,s)}class S extends a.pe{static [s.i]="PgCidrBuilder";constructor(e){super(e,"string","PgCidr")}build(e){return new T(e,this.config)}}class T extends a.Kl{static [s.i]="PgCidr";getSQLType(){return"cidr"}}function $(e){return new S(e??"")}class N extends a.pe{static [s.i]="PgCustomColumnBuilder";constructor(e,t,i){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=t,this.config.customTypeParams=i}build(e){return new P(e,this.config)}}class P extends a.Kl{static [s.i]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(e,t){super(e,t),this.sqlName=t.customTypeParams.dataType(t.fieldConfig),this.mapTo=t.customTypeParams.toDriver,this.mapFrom=t.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return"function"==typeof this.mapFrom?this.mapFrom(e):e}mapToDriverValue(e){return"function"==typeof this.mapTo?this.mapTo(e):e}}function C(e){return(t,i)=>{let{name:s,config:r}=(0,n.Ll)(t,i);return new N(s,r,e)}}var q=i(37193);class I extends a.pe{static [s.i]="PgDoublePrecisionBuilder";constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new Q(e,this.config)}}class Q extends a.Kl{static [s.i]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(e){return"string"==typeof e?Number.parseFloat(e):e}}function L(e){return new I(e??"")}class j extends a.pe{static [s.i]="PgInetBuilder";constructor(e){super(e,"string","PgInet")}build(e){return new A(e,this.config)}}class A extends a.Kl{static [s.i]="PgInet";getSQLType(){return"inet"}}function D(e){return new j(e??"")}var k=i(63431);class z extends a.pe{static [s.i]="PgIntervalBuilder";constructor(e,t){super(e,"string","PgInterval"),this.config.intervalConfig=t}build(e){return new O(e,this.config)}}class O extends a.Kl{static [s.i]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){let e=this.fields?` ${this.fields}`:"",t=this.precision?`(${this.precision})`:"";return`interval${e}${t}`}}function B(e,t={}){let{name:i,config:s}=(0,n.Ll)(e,t);return new z(i,s)}var F=i(34359),V=i(34509);class E extends a.pe{static [s.i]="PgLineBuilder";constructor(e){super(e,"array","PgLine")}build(e){return new X(e,this.config)}}class X extends a.Kl{static [s.i]="PgLine";getSQLType(){return"line"}mapFromDriverValue(e){let[t,i,s]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(i),Number.parseFloat(s)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}class K extends a.pe{static [s.i]="PgLineABCBuilder";constructor(e){super(e,"json","PgLineABC")}build(e){return new _(e,this.config)}}class _ extends a.Kl{static [s.i]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(e){let[t,i,s]=e.slice(1,-1).split(",");return{a:Number.parseFloat(t),b:Number.parseFloat(i),c:Number.parseFloat(s)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}function M(e,t){let{name:i,config:s}=(0,n.Ll)(e,t);return s?.mode&&"tuple"!==s.mode?new K(i):new E(i)}class J extends a.pe{static [s.i]="PgMacaddrBuilder";constructor(e){super(e,"string","PgMacaddr")}build(e){return new U(e,this.config)}}class U extends a.Kl{static [s.i]="PgMacaddr";getSQLType(){return"macaddr"}}function R(e){return new J(e??"")}class W extends a.pe{static [s.i]="PgMacaddr8Builder";constructor(e){super(e,"string","PgMacaddr8")}build(e){return new H(e,this.config)}}class H extends a.Kl{static [s.i]="PgMacaddr8";getSQLType(){return"macaddr8"}}function G(e){return new W(e??"")}var Z=i(72170);class Y extends a.pe{static [s.i]="PgPointTupleBuilder";constructor(e){super(e,"array","PgPointTuple")}build(e){return new ee(e,this.config)}}class ee extends a.Kl{static [s.i]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(e){if("string"==typeof e){let[t,i]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(i)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}class et extends a.pe{static [s.i]="PgPointObjectBuilder";constructor(e){super(e,"json","PgPointObject")}build(e){return new ei(e,this.config)}}class ei extends a.Kl{static [s.i]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(e){if("string"==typeof e){let[t,i]=e.slice(1,-1).split(",");return{x:Number.parseFloat(t),y:Number.parseFloat(i)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}function es(e,t){let{name:i,config:s}=(0,n.Ll)(e,t);return s?.mode&&"tuple"!==s.mode?new et(i):new Y(i)}function er(e,t){let i=new DataView(new ArrayBuffer(8));for(let s=0;s<8;s++)i.setUint8(s,e[t+s]);return i.getFloat64(0,!0)}function en(e){let t=function(e){let t=[];for(let i=0;i<e.length;i+=2)t.push(Number.parseInt(e.slice(i,i+2),16));return new Uint8Array(t)}(e),i=0,s=t[0];i+=1;let r=new DataView(t.buffer),n=r.getUint32(i,1===s);if(i+=4,0x20000000&n&&(r.getUint32(i,1===s),i+=4),(65535&n)==1){let e=er(t,i),s=er(t,i+=8);return i+=8,[e,s]}throw Error("Unsupported geometry type")}class ea extends a.pe{static [s.i]="PgGeometryBuilder";constructor(e){super(e,"array","PgGeometry")}build(e){return new el(e,this.config)}}class el extends a.Kl{static [s.i]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return en(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}class eo extends a.pe{static [s.i]="PgGeometryObjectBuilder";constructor(e){super(e,"json","PgGeometryObject")}build(e){return new ec(e,this.config)}}class ec extends a.Kl{static [s.i]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){let t=en(e);return{x:t[0],y:t[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}function eu(e,t){let{name:i,config:s}=(0,n.Ll)(e,t);return s?.mode&&"tuple"!==s.mode?new eo(i):new ea(i)}class ed extends a.pe{static [s.i]="PgRealBuilder";constructor(e,t){super(e,"number","PgReal"),this.config.length=t}build(e){return new ef(e,this.config)}}class ef extends a.Kl{static [s.i]="PgReal";constructor(e,t){super(e,t)}getSQLType(){return"real"}mapFromDriverValue=e=>"string"==typeof e?Number.parseFloat(e):e}function eh(e){return new ed(e??"")}class ex extends a.pe{static [s.i]="PgSerialBuilder";constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new eb(e,this.config)}}class eb extends a.Kl{static [s.i]="PgSerial";getSQLType(){return"serial"}}function eg(e){return new ex(e??"")}class ep extends l.p{static [s.i]="PgSmallIntBuilder";constructor(e){super(e,"number","PgSmallInt")}build(e){return new em(e,this.config)}}class em extends a.Kl{static [s.i]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=e=>"string"==typeof e?Number(e):e}function ey(e){return new ep(e??"")}class ew extends a.pe{static [s.i]="PgSmallSerialBuilder";constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new ev(e,this.config)}}class ev extends a.Kl{static [s.i]="PgSmallSerial";getSQLType(){return"smallserial"}}function eS(e){return new ew(e??"")}var eT=i(29334),e$=i(9528),eN=i(9253),eP=i(9594),eC=i(79252);class eq extends a.pe{static [s.i]="PgBinaryVectorBuilder";constructor(e,t){super(e,"string","PgBinaryVector"),this.config.dimensions=t.dimensions}build(e){return new eI(e,this.config)}}class eI extends a.Kl{static [s.i]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}}function eQ(e,t){let{name:i,config:s}=(0,n.Ll)(e,t);return new eq(i,s)}class eL extends a.pe{static [s.i]="PgHalfVectorBuilder";constructor(e,t){super(e,"array","PgHalfVector"),this.config.dimensions=t.dimensions}build(e){return new ej(e,this.config)}}class ej extends a.Kl{static [s.i]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(e=>Number.parseFloat(e))}}function eA(e,t){let{name:i,config:s}=(0,n.Ll)(e,t);return new eL(i,s)}class eD extends a.pe{static [s.i]="PgSparseVectorBuilder";constructor(e,t){super(e,"string","PgSparseVector"),this.config.dimensions=t.dimensions}build(e){return new ek(e,this.config)}}class ek extends a.Kl{static [s.i]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}}function ez(e,t){let{name:i,config:s}=(0,n.Ll)(e,t);return new eD(i,s)}class eO extends a.pe{static [s.i]="PgVectorBuilder";constructor(e,t){super(e,"array","PgVector"),this.config.dimensions=t.dimensions}build(e){return new eB(e,this.config)}}class eB extends a.Kl{static [s.i]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(e=>Number.parseFloat(e))}}function eF(e,t){let{name:i,config:s}=(0,n.Ll)(e,t);return new eO(i,s)}let eV=Symbol.for("drizzle:PgInlineForeignKeys"),eE=Symbol.for("drizzle:EnableRLS");class eX extends r.XI{static [s.i]="PgTable";static Symbol=Object.assign({},r.XI.Symbol,{InlineForeignKeys:eV,EnableRLS:eE});[eV]=[];[eE]=!1;[r.XI.Symbol.ExtraConfigBuilder]=void 0;[r.XI.Symbol.ExtraConfigColumns]={}}let eK=(e,t,i)=>(function(e,t,i,s,n=e){let a=new eX(e,s,n),l="function"==typeof t?t({bigint:f,bigserial:p,boolean:m.zM,char:v,cidr:$,customType:C,date:q.p6,doublePrecision:L,inet:D,integer:k.nd,interval:B,json:F.Pq,jsonb:V.Fx,line:M,macaddr:R,macaddr8:G,numeric:Z.sH,point:es,geometry:eu,real:eh,serial:eg,smallint:ey,smallserial:eS,text:eT.Qq,time:e$.kB,timestamp:eN.vE,uuid:eP.uR,varchar:eC.yf,bit:eQ,halfvec:eA,sparsevec:ez,vector:eF}):t,o=Object.fromEntries(Object.entries(l).map(([e,t])=>{t.setName(e);let i=t.build(a);return a[eV].push(...t.buildForeignKeys(i,a)),[e,i]})),c=Object.fromEntries(Object.entries(l).map(([e,t])=>(t.setName(e),[e,t.buildExtraConfigColumn(a)]))),u=Object.assign(a,o);return u[r.XI.Symbol.Columns]=o,u[r.XI.Symbol.ExtraConfigColumns]=c,i&&(u[eX.Symbol.ExtraConfigBuilder]=i),Object.assign(u,{enableRLS:()=>(u[eX.Symbol.EnableRLS]=!0,u)})})(e,t,i,void 0)},65734:(e,t,i)=>{i.d(t,{u:()=>a});var s=i(5730),r=i(42270),n=i(51024);class a extends n.pe{static [s.i]="PgDateColumnBaseBuilder";defaultNow(){return this.default((0,r.ll)`now()`)}}},67083:(e,t,i)=>{i.d(t,{J:()=>n,n:()=>r});var s=i(5730);class r{static [s.i]="Subquery";constructor(e,t,i,s=!1,r=[]){this._={brand:"Subquery",sql:e,selectedFields:t,alias:i,isWith:s,usedTables:r}}}class n extends r{static [s.i]="WithSubquery"}},68449:(e,t,i)=>{i.d(t,{p:()=>n});var s=i(5730),r=i(51024);class n extends r.pe{static [s.i]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(e){if(e){let{name:t,...i}=e;this.config.generatedIdentity={type:"always",sequenceName:t,sequenceOptions:i}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){let{name:t,...i}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:t,sequenceOptions:i}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}},69167:(e,t,i)=>{i.d(t,{i:()=>s});function s(e,...t){return e(...t)}},72094:(e,t,i)=>{i.a(e,async(e,s)=>{try{i.d(t,{fd:()=>x});var r=i(64939),n=i(5730),a=i(86901),l=i(11238),o=i(84826),c=i(39783),u=i(79608),d=i(26594),f=e([r,d]);[r,d]=f.then?(await f)():f;class b{constructor(e,t,i={}){this.client=e,this.dialect=t,this.options=i}static [n.i]="NodePgDriver";createSession(e){return new d._q(this.client,this.dialect,e,{logger:this.options.logger,cache:this.options.cache})}}class g extends l.p{static [n.i]="NodePgDatabase"}function h(e,t={}){let i,s,r=new o.s({casing:t.casing});if(!0===t.logger?i=new a.w:!1!==t.logger&&(i=t.logger),t.schema){let e=(0,c._k)(t.schema,c.DZ);s={fullSchema:t.schema,schema:e.tables,tableNamesMap:e.tableNamesMap}}let n=new b(e,r,{logger:i,cache:t.cache}).createSession(s),l=new g(r,n,s);return l.$client=e,l.$cache=t.cache,l.$cache&&(l.$cache.invalidate=t.cache?.onMutate),l}function x(...e){if("string"==typeof e[0]){let t=new r.default.Pool({connectionString:e[0]});return h(t,e[1])}if((0,u.Lq)(e[0])){let{connection:t,client:i,...s}=e[0];if(i)return h(i,s);let n=new r.default.Pool("string"==typeof t?{connectionString:t}:t);return h(n,s)}return h(e[0],e[1])}(x||(x={})).mock=function(e){return h({},e)},s()}catch(e){s(e)}})},72170:(e,t,i)=>{i.d(t,{Z5:()=>l,_:()=>h,sH:()=>f});var s=i(5730),r=i(79608),n=i(51024);class a extends n.pe{static [s.i]="PgNumericBuilder";constructor(e,t,i){super(e,"string","PgNumeric"),this.config.precision=t,this.config.scale=i}build(e){return new l(e,this.config)}}class l extends n.Kl{static [s.i]="PgNumeric";precision;scale;constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}mapFromDriverValue(e){return"string"==typeof e?e:String(e)}getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}class o extends n.pe{static [s.i]="PgNumericNumberBuilder";constructor(e,t,i){super(e,"number","PgNumericNumber"),this.config.precision=t,this.config.scale=i}build(e){return new c(e,this.config)}}class c extends n.Kl{static [s.i]="PgNumericNumber";precision;scale;constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}mapFromDriverValue(e){return"number"==typeof e?e:Number(e)}mapToDriverValue=String;getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}class u extends n.pe{static [s.i]="PgNumericBigIntBuilder";constructor(e,t,i){super(e,"bigint","PgNumericBigInt"),this.config.precision=t,this.config.scale=i}build(e){return new d(e,this.config)}}class d extends n.Kl{static [s.i]="PgNumericBigInt";precision;scale;constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}mapFromDriverValue=BigInt;mapToDriverValue=String;getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}function f(e,t){let{name:i,config:s}=(0,r.Ll)(e,t),n=s?.mode;return"number"===n?new o(i,s?.precision,s?.scale):"bigint"===n?new u(i,s?.precision,s?.scale):new a(i,s?.precision,s?.scale)}let h=f},79252:(e,t,i)=>{i.d(t,{yf:()=>o});var s=i(5730),r=i(79608),n=i(51024);class a extends n.pe{static [s.i]="PgVarcharBuilder";constructor(e,t){super(e,"string","PgVarchar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new l(e,this.config)}}class l extends n.Kl{static [s.i]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return void 0===this.length?"varchar":`varchar(${this.length})`}}function o(e,t={}){let{name:i,config:s}=(0,r.Ll)(e,t);return new a(i,s)}},79608:(e,t,i)=>{i.d(t,{DV:()=>u,He:()=>function e(t,i){return Object.entries(t).reduce((t,[a,o])=>{if("string"!=typeof a)return t;let c=i?[...i,a]:[a];return(0,r.is)(o,s.V)||(0,r.is)(o,n.Xs)||(0,r.is)(o,n.Xs.Aliased)?t.push({path:c,field:o}):(0,r.is)(o,l.XI)?t.push(...e(o[l.XI.Symbol.Columns],c)):t.push(...e(o,c)),t},[])},Ll:()=>b,Lq:()=>g,XJ:()=>f,YD:()=>h,a6:()=>c,q:()=>d,zN:()=>x});var s=i(10007),r=i(5730),n=i(42270),a=i(67083),l=i(24717),o=i(12772);function c(e,t,i){let a={},o=e.reduce((e,{path:o,field:c},u)=>{let d;d=(0,r.is)(c,s.V)?c:(0,r.is)(c,n.Xs)?c.decoder:c.sql.decoder;let f=e;for(let[e,n]of o.entries())if(e<o.length-1)n in f||(f[n]={}),f=f[n];else{let e=t[u],h=f[n]=null===e?null:d.mapFromDriverValue(e);if(i&&(0,r.is)(c,s.V)&&2===o.length){let e=o[0];e in a?"string"==typeof a[e]&&a[e]!==(0,l.Io)(c.table)&&(a[e]=!1):a[e]=null===h&&(0,l.Io)(c.table)}}return e},{});if(i&&Object.keys(a).length>0)for(let[e,t]of Object.entries(a))"string"!=typeof t||i[t]||(o[e]=null);return o}function u(e,t){let i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(let[e,t]of i.entries())if(t!==s[e])return!1;return!0}function d(e,t){let i=Object.entries(t).filter(([,e])=>void 0!==e).map(([t,i])=>(0,r.is)(i,n.Xs)||(0,r.is)(i,s.V)?[t,i]:[t,new n.Iw(i,e[l.XI.Symbol.Columns][t])]);if(0===i.length)throw Error("No values to set");return Object.fromEntries(i)}function f(e,t){for(let i of t)for(let t of Object.getOwnPropertyNames(i.prototype))"constructor"!==t&&Object.defineProperty(e.prototype,t,Object.getOwnPropertyDescriptor(i.prototype,t)||Object.create(null))}function h(e){return e[l.XI.Symbol.Columns]}function x(e){return(0,r.is)(e,a.n)?e._.alias:(0,r.is)(e,n.Ss)?e[o.n].name:(0,r.is)(e,n.Xs)?void 0:e[l.XI.Symbol.IsAlias]?e[l.XI.Symbol.Name]:e[l.XI.Symbol.BaseName]}function b(e,t){return{name:"string"==typeof e&&e.length>0?e:"",config:"object"==typeof e?e:t}}function g(e){if("object"!=typeof e||null===e||"Object"!==e.constructor.name)return!1;if("logger"in e){let t=typeof e.logger;return"boolean"===t||"object"===t&&"function"==typeof e.logger.logQuery||"undefined"===t}if("schema"in e){let t=typeof e.schema;return"object"===t||"undefined"===t}if("casing"in e){let t=typeof e.casing;return"string"===t||"undefined"===t}if("mode"in e)return"default"===e.mode&&"planetscale"===e.mode&&void 0===e.mode;if("connection"in e){let t=typeof e.connection;return"string"===t||"object"===t||"undefined"===t}if("client"in e){let t=typeof e.client;return"object"===t||"function"===t||"undefined"===t}return 0===Object.keys(e).length}},84826:(e,t,i)=>{i.d(t,{s:()=>q});var s=i(89685),r=i(5730),n=i(24717);function a(e){return(e.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).map(e=>e.toLowerCase()).join("_")}function l(e){return(e.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).reduce((e,t,i)=>e+(0===i?t.toLowerCase():`${t[0].toUpperCase()}${t.slice(1)}`),"")}function o(e){return e}class c{static [r.i]="CasingCache";cache={};cachedTables={};convert;constructor(e){this.convert="snake_case"===e?a:"camelCase"===e?l:o}getColumnCasing(e){if(!e.keyAsName)return e.name;let t=e.table[n.XI.Symbol.Schema]??"public",i=e.table[n.XI.Symbol.OriginalName],s=`${t}.${i}.${e.name}`;return this.cache[s]||this.cacheTable(e.table),this.cache[s]}cacheTable(e){let t=e[n.XI.Symbol.Schema]??"public",i=e[n.XI.Symbol.OriginalName],s=`${t}.${i}`;if(!this.cachedTables[s]){for(let t of Object.values(e[n.XI.Symbol.Columns])){let e=`${s}.${t.name}`;this.cache[e]=this.convert(t.name)}this.cachedTables[s]=!0}}clearCache(){this.cache={},this.cachedTables={}}}var u=i(10007),d=i(40774),f=i(51024),h=i(34509),x=i(34359),b=i(72170),g=i(9528),p=i(9253),m=i(37193),y=i(9594),w=i(64386),v=i(39783),S=i(42270),T=i(94634),$=i(67083),N=i(79608),P=i(12772),C=i(316);class q{static [r.i]="PgDialect";casing;constructor(e){this.casing=new c(e?.casing)}async migrate(e,t,i){let s="string"==typeof i?"__drizzle_migrations":i.migrationsTable??"__drizzle_migrations",r="string"==typeof i?"drizzle":i.migrationsSchema??"drizzle",n=(0,S.ll)`
			CREATE TABLE IF NOT EXISTS ${S.ll.identifier(r)}.${S.ll.identifier(s)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at bigint
			)
		`;await t.execute((0,S.ll)`CREATE SCHEMA IF NOT EXISTS ${S.ll.identifier(r)}`),await t.execute(n);let a=(await t.all((0,S.ll)`select id, hash, created_at from ${S.ll.identifier(r)}.${S.ll.identifier(s)} order by created_at desc limit 1`))[0];await t.transaction(async t=>{for await(let i of e)if(!a||Number(a.created_at)<i.folderMillis){for(let e of i.sql)await t.execute(S.ll.raw(e));await t.execute((0,S.ll)`insert into ${S.ll.identifier(r)}.${S.ll.identifier(s)} ("hash", "created_at") values(${i.hash}, ${i.folderMillis})`)}})}escapeName(e){return`"${e}"`}escapeParam(e){return`$${e+1}`}escapeString(e){return`'${e.replace(/'/g,"''")}'`}buildWithCTE(e){if(!e?.length)return;let t=[(0,S.ll)`with `];for(let[i,s]of e.entries())t.push((0,S.ll)`${S.ll.identifier(s._.alias)} as (${s._.sql})`),i<e.length-1&&t.push((0,S.ll)`, `);return t.push((0,S.ll)` `),S.ll.join(t)}buildDeleteQuery({table:e,where:t,returning:i,withList:s}){let r=this.buildWithCTE(s),n=i?(0,S.ll)` returning ${this.buildSelection(i,{isSingleTable:!0})}`:void 0,a=t?(0,S.ll)` where ${t}`:void 0;return(0,S.ll)`${r}delete from ${e}${a}${n}`}buildUpdateSet(e,t){let i=e[n.XI.Symbol.Columns],s=Object.keys(i).filter(e=>void 0!==t[e]||i[e]?.onUpdateFn!==void 0),r=s.length;return S.ll.join(s.flatMap((e,s)=>{let n=i[e],a=t[e]??S.ll.param(n.onUpdateFn(),n),l=(0,S.ll)`${S.ll.identifier(this.casing.getColumnCasing(n))} = ${a}`;return s<r-1?[l,S.ll.raw(", ")]:[l]}))}buildUpdateQuery({table:e,set:t,where:i,returning:s,withList:r,from:n,joins:a}){let l=this.buildWithCTE(r),o=e[w.mu.Symbol.Name],c=e[w.mu.Symbol.Schema],u=e[w.mu.Symbol.OriginalName],d=o===u?void 0:o,f=(0,S.ll)`${c?(0,S.ll)`${S.ll.identifier(c)}.`:void 0}${S.ll.identifier(u)}${d&&(0,S.ll)` ${S.ll.identifier(d)}`}`,h=this.buildUpdateSet(e,t),x=n&&S.ll.join([S.ll.raw(" from "),this.buildFromTable(n)]),b=this.buildJoins(a),g=s?(0,S.ll)` returning ${this.buildSelection(s,{isSingleTable:!n})}`:void 0,p=i?(0,S.ll)` where ${i}`:void 0;return(0,S.ll)`${l}update ${f} set ${h}${x}${b}${p}${g}`}buildSelection(e,{isSingleTable:t=!1}={}){let i=e.length,s=e.flatMap(({field:e},s)=>{let n=[];if((0,r.is)(e,S.Xs.Aliased)&&e.isSelectionField)n.push(S.ll.identifier(e.fieldAlias));else if((0,r.is)(e,S.Xs.Aliased)||(0,r.is)(e,S.Xs)){let i=(0,r.is)(e,S.Xs.Aliased)?e.sql:e;t?n.push(new S.Xs(i.queryChunks.map(e=>(0,r.is)(e,f.Kl)?S.ll.identifier(this.casing.getColumnCasing(e)):e))):n.push(i),(0,r.is)(e,S.Xs.Aliased)&&n.push((0,S.ll)` as ${S.ll.identifier(e.fieldAlias)}`)}else(0,r.is)(e,u.V)&&(t?n.push(S.ll.identifier(this.casing.getColumnCasing(e))):n.push(e));return s<i-1&&n.push((0,S.ll)`, `),n});return S.ll.join(s)}buildJoins(e){if(!e||0===e.length)return;let t=[];for(let[i,s]of e.entries()){0===i&&t.push((0,S.ll)` `);let n=s.table,a=s.lateral?(0,S.ll)` lateral`:void 0,l=s.on?(0,S.ll)` on ${s.on}`:void 0;if((0,r.is)(n,w.mu)){let e=n[w.mu.Symbol.Name],i=n[w.mu.Symbol.Schema],r=n[w.mu.Symbol.OriginalName],o=e===r?void 0:s.alias;t.push((0,S.ll)`${S.ll.raw(s.joinType)} join${a} ${i?(0,S.ll)`${S.ll.identifier(i)}.`:void 0}${S.ll.identifier(r)}${o&&(0,S.ll)` ${S.ll.identifier(o)}`}${l}`)}else if((0,r.is)(n,S.Ss)){let e=n[P.n].name,i=n[P.n].schema,r=n[P.n].originalName,o=e===r?void 0:s.alias;t.push((0,S.ll)`${S.ll.raw(s.joinType)} join${a} ${i?(0,S.ll)`${S.ll.identifier(i)}.`:void 0}${S.ll.identifier(r)}${o&&(0,S.ll)` ${S.ll.identifier(o)}`}${l}`)}else t.push((0,S.ll)`${S.ll.raw(s.joinType)} join${a} ${n}${l}`);i<e.length-1&&t.push((0,S.ll)` `)}return S.ll.join(t)}buildFromTable(e){if((0,r.is)(e,n.XI)&&e[n.XI.Symbol.IsAlias]){let t=(0,S.ll)`${S.ll.identifier(e[n.XI.Symbol.OriginalName])}`;return e[n.XI.Symbol.Schema]&&(t=(0,S.ll)`${S.ll.identifier(e[n.XI.Symbol.Schema])}.${t}`),(0,S.ll)`${t} ${S.ll.identifier(e[n.XI.Symbol.Name])}`}return e}buildSelectQuery({withList:e,fields:t,fieldsFlat:i,where:s,having:a,table:l,joins:o,orderBy:c,groupBy:d,limit:f,offset:h,lockingClause:x,distinct:b,setOperators:g}){let p,m,y,w=i??(0,N.He)(t);for(let e of w){let t;if((0,r.is)(e.field,u.V)&&(0,n.Io)(e.field.table)!==((0,r.is)(l,$.n)?l._.alias:(0,r.is)(l,C.w)?l[P.n].name:(0,r.is)(l,S.Xs)?void 0:(0,n.Io)(l))&&(t=e.field.table,!o?.some(({alias:e})=>e===(t[n.XI.Symbol.IsAlias]?(0,n.Io)(t):t[n.XI.Symbol.BaseName])))){let t=(0,n.Io)(e.field.table);throw Error(`Your "${e.path.join("->")}" field references a column "${t}"."${e.field.name}", but the table "${t}" is not part of the query! Did you forget to join it?`)}}let v=!o||0===o.length,T=this.buildWithCTE(e);b&&(p=!0===b?(0,S.ll)` distinct`:(0,S.ll)` distinct on (${S.ll.join(b.on,(0,S.ll)`, `)})`);let q=this.buildSelection(w,{isSingleTable:v}),I=this.buildFromTable(l),Q=this.buildJoins(o),L=s?(0,S.ll)` where ${s}`:void 0,j=a?(0,S.ll)` having ${a}`:void 0;c&&c.length>0&&(m=(0,S.ll)` order by ${S.ll.join(c,(0,S.ll)`, `)}`),d&&d.length>0&&(y=(0,S.ll)` group by ${S.ll.join(d,(0,S.ll)`, `)}`);let A="object"==typeof f||"number"==typeof f&&f>=0?(0,S.ll)` limit ${f}`:void 0,D=h?(0,S.ll)` offset ${h}`:void 0,k=S.ll.empty();if(x){let e=(0,S.ll)` for ${S.ll.raw(x.strength)}`;x.config.of&&e.append((0,S.ll)` of ${S.ll.join(Array.isArray(x.config.of)?x.config.of:[x.config.of],(0,S.ll)`, `)}`),x.config.noWait?e.append((0,S.ll)` nowait`):x.config.skipLocked&&e.append((0,S.ll)` skip locked`),k.append(e)}let z=(0,S.ll)`${T}select${p} ${q} from ${I}${Q}${L}${y}${j}${m}${A}${D}${k}`;return g.length>0?this.buildSetOperations(z,g):z}buildSetOperations(e,t){let[i,...s]=t;if(!i)throw Error("Cannot pass undefined values to any set operator");return 0===s.length?this.buildSetOperationQuery({leftSelect:e,setOperator:i}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:e,setOperator:i}),s)}buildSetOperationQuery({leftSelect:e,setOperator:{type:t,isAll:i,rightSelect:s,limit:n,orderBy:a,offset:l}}){let o,c=(0,S.ll)`(${e.getSQL()}) `,u=(0,S.ll)`(${s.getSQL()})`;if(a&&a.length>0){let e=[];for(let t of a)if((0,r.is)(t,f.Kl))e.push(S.ll.identifier(t.name));else if((0,r.is)(t,S.Xs)){for(let e=0;e<t.queryChunks.length;e++){let i=t.queryChunks[e];(0,r.is)(i,f.Kl)&&(t.queryChunks[e]=S.ll.identifier(i.name))}e.push((0,S.ll)`${t}`)}else e.push((0,S.ll)`${t}`);o=(0,S.ll)` order by ${S.ll.join(e,(0,S.ll)`, `)} `}let d="object"==typeof n||"number"==typeof n&&n>=0?(0,S.ll)` limit ${n}`:void 0,h=S.ll.raw(`${t} ${i?"all ":""}`),x=l?(0,S.ll)` offset ${l}`:void 0;return(0,S.ll)`${c}${h}${u}${o}${d}${x}`}buildInsertQuery({table:e,values:t,onConflict:i,returning:s,withList:a,select:l,overridingSystemValue_:o}){let c=[],u=Object.entries(e[n.XI.Symbol.Columns]).filter(([e,t])=>!t.shouldDisableInsert()),d=u.map(([,e])=>S.ll.identifier(this.casing.getColumnCasing(e)));if(l)(0,r.is)(t,S.Xs)?c.push(t):c.push(t.getSQL());else for(let[e,i]of(c.push(S.ll.raw("values ")),t.entries())){let s=[];for(let[e,t]of u){let n=i[e];if(void 0===n||(0,r.is)(n,S.Iw)&&void 0===n.value)if(void 0!==t.defaultFn){let e=t.defaultFn(),i=(0,r.is)(e,S.Xs)?e:S.ll.param(e,t);s.push(i)}else if(t.default||void 0===t.onUpdateFn)s.push((0,S.ll)`default`);else{let e=t.onUpdateFn(),i=(0,r.is)(e,S.Xs)?e:S.ll.param(e,t);s.push(i)}else s.push(n)}c.push(s),e<t.length-1&&c.push((0,S.ll)`, `)}let f=this.buildWithCTE(a),h=S.ll.join(c),x=s?(0,S.ll)` returning ${this.buildSelection(s,{isSingleTable:!0})}`:void 0,b=i?(0,S.ll)` on conflict ${i}`:void 0,g=!0===o?(0,S.ll)`overriding system value `:void 0;return(0,S.ll)`${f}insert into ${e} ${d} ${g}${h}${b}${x}`}buildRefreshMaterializedViewQuery({view:e,concurrently:t,withNoData:i}){let s=t?(0,S.ll)` concurrently`:void 0,r=i?(0,S.ll)` with no data`:void 0;return(0,S.ll)`refresh materialized view${s} ${e}${r}`}prepareTyping(e){if((0,r.is)(e,h.kn)||(0,r.is)(e,x.iX))return"json";if((0,r.is)(e,b.Z5))return"decimal";if((0,r.is)(e,g.Xd))return"time";if((0,r.is)(e,p.KM)||(0,r.is)(e,p.xQ))return"timestamp";if((0,r.is)(e,m.qw)||(0,r.is)(e,m.dw))return"date";else if((0,r.is)(e,y.dL))return"uuid";else return"none"}sqlToQuery(e,t){return e.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,prepareTyping:this.prepareTyping,invokeSource:t})}buildRelationalQueryWithoutPK({fullSchema:e,schema:t,tableNamesMap:i,table:a,tableConfig:l,queryConfig:o,tableAlias:c,nestedQueryRelation:f,joinOn:h}){let x,b=[],g,p,m=[],y,N=[];if(!0===o)b=Object.entries(l.columns).map(([e,t])=>({dbKey:t.name,tsKey:e,field:(0,s.ug)(t,c),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let a=Object.fromEntries(Object.entries(l.columns).map(([e,t])=>[e,(0,s.ug)(t,c)]));if(o.where){let e="function"==typeof o.where?o.where(a,(0,v.mm)()):o.where;y=e&&(0,s.yY)(e,c)}let d=[],f=[];if(o.columns){let e=!1;for(let[t,i]of Object.entries(o.columns))void 0!==i&&t in l.columns&&(e||!0!==i||(e=!0),f.push(t));f.length>0&&(f=e?f.filter(e=>o.columns?.[e]===!0):Object.keys(l.columns).filter(e=>!f.includes(e)))}else f=Object.keys(l.columns);for(let e of f){let t=l.columns[e];d.push({tsKey:e,value:t})}let h=[];if(o.with&&(h=Object.entries(o.with).filter(e=>!!e[1]).map(([e,t])=>({tsKey:e,queryConfig:t,relation:l.relations[e]}))),o.extras)for(let[e,t]of Object.entries("function"==typeof o.extras?o.extras(a,{sql:S.ll}):o.extras))d.push({tsKey:e,value:(0,s.Hs)(t,c)});for(let{tsKey:e,value:t}of d)b.push({dbKey:(0,r.is)(t,S.Xs.Aliased)?t.fieldAlias:l.columns[e].name,tsKey:e,field:(0,r.is)(t,u.V)?(0,s.ug)(t,c):t,relationTableTsKey:void 0,isJson:!1,selection:[]});let x="function"==typeof o.orderBy?o.orderBy(a,(0,v.rl)()):o.orderBy??[];for(let{tsKey:a,queryConfig:l,relation:d}of(Array.isArray(x)||(x=[x]),m=x.map(e=>(0,r.is)(e,u.V)?(0,s.ug)(e,c):(0,s.yY)(e,c)),g=o.limit,p=o.offset,h)){let o=(0,v.W0)(t,i,d),u=i[(0,n.Lf)(d.referencedTable)],f=`${c}_${a}`,h=(0,T.Uo)(...o.fields.map((e,t)=>(0,T.eq)((0,s.ug)(o.references[t],f),(0,s.ug)(e,c)))),x=this.buildRelationalQueryWithoutPK({fullSchema:e,schema:t,tableNamesMap:i,table:e[u],tableConfig:t[u],queryConfig:(0,r.is)(d,v.pD)?!0===l?{limit:1}:{...l,limit:1}:l,tableAlias:f,joinOn:h,nestedQueryRelation:d}),g=(0,S.ll)`${S.ll.identifier(f)}.${S.ll.identifier("data")}`.as(a);N.push({on:(0,S.ll)`true`,table:new $.n(x.sql,{},f),alias:f,joinType:"left",lateral:!0}),b.push({dbKey:a,tsKey:a,field:g,relationTableTsKey:u,isJson:!0,selection:x.selection})}}if(0===b.length)throw new d.n({message:`No fields selected for table "${l.tsName}" ("${c}")`});if(y=(0,T.Uo)(h,y),f){let e=(0,S.ll)`json_build_array(${S.ll.join(b.map(({field:e,tsKey:t,isJson:i})=>i?(0,S.ll)`${S.ll.identifier(`${c}_${t}`)}.${S.ll.identifier("data")}`:(0,r.is)(e,S.Xs.Aliased)?e.sql:e),(0,S.ll)`, `)})`;(0,r.is)(f,v.iv)&&(e=(0,S.ll)`coalesce(json_agg(${e}${m.length>0?(0,S.ll)` order by ${S.ll.join(m,(0,S.ll)`, `)}`:void 0}), '[]'::json)`);let t=[{dbKey:"data",tsKey:"data",field:e.as("data"),isJson:!0,relationTableTsKey:l.tsName,selection:b}];void 0!==g||void 0!==p||m.length>0?(x=this.buildSelectQuery({table:(0,s.oG)(a,c),fields:{},fieldsFlat:[{path:[],field:S.ll.raw("*")}],where:y,limit:g,offset:p,orderBy:m,setOperators:[]}),y=void 0,g=void 0,p=void 0,m=[]):x=(0,s.oG)(a,c),x=this.buildSelectQuery({table:(0,r.is)(x,w.mu)?x:new $.n(x,{},c),fields:{},fieldsFlat:t.map(({field:e})=>({path:[],field:(0,r.is)(e,u.V)?(0,s.ug)(e,c):e})),joins:N,where:y,limit:g,offset:p,orderBy:m,setOperators:[]})}else x=this.buildSelectQuery({table:(0,s.oG)(a,c),fields:{},fieldsFlat:b.map(({field:e})=>({path:[],field:(0,r.is)(e,u.V)?(0,s.ug)(e,c):e})),joins:N,where:y,limit:g,offset:p,orderBy:m,setOperators:[]});return{tableTsKey:l.tsName,sql:x,selection:b}}}},85663:(e,t,i)=>{i.d(t,{UD:()=>a,tW:()=>n});var s=i(55511);function r(e,t){if("number"!=typeof(e=e||f))throw Error("Illegal arguments: "+typeof e+", "+typeof t);e<4?e=4:e>31&&(e=31);var i=[];return i.push("$2b$"),e<10&&i.push("0"),i.push(e.toString()),i.push("$"),i.push(u(function(e){try{return crypto.getRandomValues(new Uint8Array(e))}catch{}try{return s.randomBytes(e)}catch{}!0;throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative")}(d),d)),i.join("")}function n(e,t,i,s){function n(i){"string"==typeof e&&"number"==typeof t?function(e,t,i){if("function"==typeof t&&(i=t,t=void 0),"function"==typeof e&&(i=e,e=void 0),void 0===e)e=f;else if("number"!=typeof e)throw Error("illegal arguments: "+typeof e);function s(t){l(function(){try{t(null,r(e))}catch(e){t(e)}})}if(!i)return new Promise(function(e,t){s(function(i,s){if(i)return void t(i);e(s)})});if("function"!=typeof i)throw Error("Illegal callback: "+typeof i);s(i)}(t,function(t,r){w(e,r,i,s)}):"string"==typeof e&&"string"==typeof t?w(e,t,i,s):l(i.bind(this,Error("Illegal arguments: "+typeof e+", "+typeof t)))}if(!i)return new Promise(function(e,t){n(function(i,s){if(i)return void t(i);e(s)})});if("function"!=typeof i)throw Error("Illegal callback: "+typeof i);n(i)}function a(e,t,i,s){function r(i){return"string"!=typeof e||"string"!=typeof t?void l(i.bind(this,Error("Illegal arguments: "+typeof e+", "+typeof t))):60!==t.length?void l(i.bind(this,null,!1)):void n(e,t.substring(0,29),function(e,s){e?i(e):i(null,function(e,t){for(var i=e.length^t.length,s=0;s<e.length;++s)i|=e.charCodeAt(s)^t.charCodeAt(s);return 0===i}(s,t))},s)}if(!i)return new Promise(function(e,t){r(function(i,s){if(i)return void t(i);e(s)})});if("function"!=typeof i)throw Error("Illegal callback: "+typeof i);r(i)}var l="undefined"!=typeof process&&process&&"function"==typeof process.nextTick?"function"==typeof setImmediate?setImmediate:process.nextTick:setTimeout,o="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),c=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1];function u(e,t){var i,s,r=0,n=[];if(t<=0||t>e.length)throw Error("Illegal len: "+t);for(;r<t;){if(i=255&e[r++],n.push(o[i>>2&63]),i=(3&i)<<4,r>=t||(i|=(s=255&e[r++])>>4&15,n.push(o[63&i]),i=(15&s)<<2,r>=t)){n.push(o[63&i]);break}i|=(s=255&e[r++])>>6&3,n.push(o[63&i]),n.push(o[63&s])}return n.join("")}var d=16,f=10,h=[0x243f6a88,0x85a308d3,0x13198a2e,0x3707344,0xa4093822,0x299f31d0,0x82efa98,0xec4e6c89,0x452821e6,0x38d01377,0xbe5466cf,0x34e90c6c,0xc0ac29b7,0xc97c50dd,0x3f84d5b5,0xb5470917,0x9216d5d9,0x8979fb1b],x=[0xd1310ba6,0x98dfb5ac,0x2ffd72db,0xd01adfb7,0xb8e1afed,0x6a267e96,0xba7c9045,0xf12c7f99,0x24a19947,0xb3916cf7,0x801f2e2,0x858efc16,0x636920d8,0x71574e69,0xa458fea3,0xf4933d7e,0xd95748f,0x728eb658,0x718bcd58,0x82154aee,0x7b54a41d,0xc25a59b5,0x9c30d539,0x2af26013,0xc5d1b023,0x286085f0,0xca417918,0xb8db38ef,0x8e79dcb0,0x603a180e,0x6c9e0e8b,0xb01e8a3e,0xd71577c1,0xbd314b27,0x78af2fda,0x55605c60,0xe65525f3,0xaa55ab94,0x57489862,0x63e81440,0x55ca396a,0x2aab10b6,0xb4cc5c34,0x1141e8ce,0xa15486af,0x7c72e993,0xb3ee1411,0x636fbc2a,0x2ba9c55d,0x741831f6,0xce5c3e16,0x9b87931e,0xafd6ba33,0x6c24cf5c,0x7a325381,0x28958677,0x3b8f4898,0x6b4bb9af,0xc4bfe81b,0x66282193,0x61d809cc,0xfb21a991,0x487cac60,0x5dec8032,0xef845d5d,0xe98575b1,0xdc262302,0xeb651b88,0x23893e81,0xd396acc5,0xf6d6ff3,0x83f44239,0x2e0b4482,0xa4842004,0x69c8f04a,0x9e1f9b5e,0x21c66842,0xf6e96c9a,0x670c9c61,0xabd388f0,0x6a51a0d2,0xd8542f68,0x960fa728,0xab5133a3,0x6eef0b6c,0x137a3be4,0xba3bf050,0x7efb2a98,0xa1f1651d,0x39af0176,0x66ca593e,0x82430e88,0x8cee8619,0x456f9fb4,0x7d84a5c3,0x3b8b5ebe,0xe06f75d8,0x85c12073,0x401a449f,0x56c16aa6,0x4ed3aa62,0x363f7706,0x1bfedf72,0x429b023d,0x37d0d724,0xd00a1248,0xdb0fead3,0x49f1c09b,0x75372c9,0x80991b7b,0x25d479d8,0xf6e8def7,0xe3fe501a,0xb6794c3b,0x976ce0bd,0x4c006ba,0xc1a94fb6,0x409f60c4,0x5e5c9ec2,0x196a2463,0x68fb6faf,0x3e6c53b5,0x1339b2eb,0x3b52ec6f,0x6dfc511f,0x9b30952c,0xcc814544,0xaf5ebd09,0xbee3d004,0xde334afd,0x660f2807,0x192e4bb3,0xc0cba857,0x45c8740f,0xd20b5f39,0xb9d3fbdb,0x5579c0bd,0x1a60320a,0xd6a100c6,0x402c7279,0x679f25fe,0xfb1fa3cc,0x8ea5e9f8,0xdb3222f8,0x3c7516df,0xfd616b15,0x2f501ec8,0xad0552ab,0x323db5fa,0xfd238760,0x53317b48,0x3e00df82,0x9e5c57bb,0xca6f8ca0,0x1a87562e,0xdf1769db,0xd542a8f6,0x287effc3,0xac6732c6,0x8c4f5573,0x695b27b0,0xbbca58c8,0xe1ffa35d,0xb8f011a0,0x10fa3d98,0xfd2183b8,0x4afcb56c,0x2dd1d35b,0x9a53e479,0xb6f84565,0xd28e49bc,0x4bfb9790,0xe1ddf2da,0xa4cb7e33,0x62fb1341,0xcee4c6e8,0xef20cada,0x36774c01,0xd07e9efe,0x2bf11fb4,0x95dbda4d,0xae909198,0xeaad8e71,0x6b93d5a0,0xd08ed1d0,0xafc725e0,0x8e3c5b2f,0x8e7594b7,0x8ff6e2fb,0xf2122b64,0x8888b812,0x900df01c,0x4fad5ea0,0x688fc31c,0xd1cff191,0xb3a8c1ad,0x2f2f2218,0xbe0e1777,0xea752dfe,0x8b021fa1,0xe5a0cc0f,0xb56f74e8,0x18acf3d6,0xce89e299,0xb4a84fe0,0xfd13e0b7,0x7cc43b81,0xd2ada8d9,0x165fa266,0x80957705,0x93cc7314,0x211a1477,0xe6ad2065,0x77b5fa86,0xc75442f5,0xfb9d35cf,0xebcdaf0c,0x7b3e89a0,0xd6411bd3,0xae1e7e49,2428461,0x2071b35e,0x226800bb,0x57b8e0af,0x2464369b,0xf009b91e,0x5563911d,0x59dfa6aa,0x78c14389,0xd95a537f,0x207d5ba2,0x2e5b9c5,0x83260376,0x6295cfa9,0x11c81968,0x4e734a41,0xb3472dca,0x7b14a94a,0x1b510052,0x9a532915,0xd60f573f,0xbc9bc6e4,0x2b60a476,0x81e67400,0x8ba6fb5,0x571be91f,0xf296ec6b,0x2a0dd915,0xb6636521,0xe7b9f9b6,0xff34052e,0xc5855664,0x53b02d5d,0xa99f8fa1,0x8ba4799,0x6e85076a,0x4b7a70e9,0xb5b32944,0xdb75092e,0xc4192623,290971e4,0x49a7df7d,0x9cee60b8,0x8fedb266,0xecaa8c71,0x699a17ff,0x5664526c,0xc2b19ee1,0x193602a5,0x75094c29,0xa0591340,0xe4183a3e,0x3f54989a,0x5b429d65,0x6b8fe4d6,0x99f73fd6,0xa1d29c07,0xefe830f5,0x4d2d38e6,0xf0255dc1,0x4cdd2086,0x8470eb26,0x6382e9c6,0x21ecc5e,0x9686b3f,0x3ebaefc9,0x3c971814,0x6b6a70a1,0x687f3584,0x52a0e286,0xb79c5305,0xaa500737,0x3e07841c,0x7fdeae5c,0x8e7d44ec,0x5716f2b8,0xb03ada37,0xf0500c0d,0xf01c1f04,0x200b3ff,0xae0cf51a,0x3cb574b2,0x25837a58,0xdc0921bd,0xd19113f9,0x7ca92ff6,0x94324773,0x22f54701,0x3ae5e581,0x37c2dadc,0xc8b57634,0x9af3dda7,0xa9446146,0xfd0030e,0xecc8c73e,0xa4751e41,0xe238cd99,0x3bea0e2f,0x3280bba1,0x183eb331,0x4e548b38,0x4f6db908,0x6f420d03,0xf60a04bf,0x2cb81290,0x24977c79,0x5679b072,0xbcaf89af,0xde9a771f,0xd9930810,0xb38bae12,0xdccf3f2e,0x5512721f,0x2e6b7124,0x501adde6,0x9f84cd87,0x7a584718,0x7408da17,0xbc9f9abc,0xe94b7d8c,0xec7aec3a,0xdb851dfa,0x63094366,0xc464c3d2,0xef1c1847,0x3215d908,0xdd433b37,0x24c2ba16,0x12a14d43,0x2a65c451,0x50940002,0x133ae4dd,0x71dff89e,0x10314e55,0x81ac77d6,0x5f11199b,0x43556f1,0xd7a3c76b,0x3c11183b,0x5924a509,0xf28fe6ed,0x97f1fbfa,0x9ebabf2c,0x1e153c6e,0x86e34570,0xeae96fb1,0x860e5e0a,0x5a3e2ab3,0x771fe71c,0x4e3d06fa,0x2965dcb9,0x99e71d0f,0x803e89d6,0x5266c825,0x2e4cc978,0x9c10b36a,0xc6150eba,0x94e2ea78,0xa5fc3c53,0x1e0a2df4,0xf2f74ea7,0x361d2b3d,0x1939260f,0x19c27960,0x5223a708,0xf71312b6,0xebadfe6e,0xeac31f66,0xe3bc4595,0xa67bc883,0xb17f37d1,0x18cff28,0xc332ddef,0xbe6c5aa5,0x65582185,0x68ab9802,0xeecea50f,0xdb2f953b,0x2aef7dad,0x5b6e2f84,0x1521b628,0x29076170,0xecdd4775,0x619f1510,0x13cca830,0xeb61bd96,0x334fe1e,0xaa0363cf,0xb5735c90,0x4c70a239,0xd59e9e0b,0xcbaade14,0xeecc86bc,0x60622ca7,0x9cab5cab,0xb2f3846e,0x648b1eaf,0x19bdf0ca,0xa02369b9,0x655abb50,0x40685a32,0x3c2ab4b3,0x319ee9d5,0xc021b8f7,0x9b540b19,0x875fa099,0x95f7997e,0x623d7da8,0xf837889a,0x97e32d77,0x11ed935f,0x16681281,0xe358829,0xc7e61fd6,0x96dedfa1,0x7858ba99,0x57f584a5,0x1b227263,0x9b83c3ff,0x1ac24696,0xcdb30aeb,0x532e3054,0x8fd948e4,0x6dbc3128,0x58ebf2ef,0x34c6ffea,0xfe28ed61,0xee7c3c73,0x5d4a14d9,0xe864b7e3,0x42105d14,0x203e13e0,0x45eee2b6,0xa3aaabea,0xdb6c4f15,0xfacb4fd0,0xc742f442,0xef6abbb5,0x654f3b1d,0x41cd2105,0xd81e799e,0x86854dc7,0xe44b476a,0x3d816250,0xcf62a1f2,0x5b8d2646,0xfc8883a0,0xc1c7b6a3,0x7f1524c3,0x69cb7492,0x47848a0b,0x5692b285,0x95bbf00,0xad19489d,0x1462b174,0x23820e00,0x58428d2a,0xc55f5ea,0x1dadf43e,0x233f7061,0x3372f092,0x8d937e41,0xd65fecf1,0x6c223bdb,0x7cde3759,0xcbee7460,0x4085f2a7,0xce77326e,0xa6078084,0x19f8509e,0xe8efd855,0x61d99735,0xa969a7aa,0xc50c06c2,0x5a04abfc,0x800bcadc,0x9e447a2e,0xc3453484,0xfdd56705,0xe1e9ec9,0xdb73dbd3,0x105588cd,0x675fda79,0xe3674340,0xc5c43465,0x713e38d8,0x3d28f89e,0xf16dff20,0x153e21e7,0x8fb03d4a,0xe6e39f2b,0xdb83adf7,0xe93d5a68,0x948140f7,0xf64c261c,0x94692934,0x411520f7,0x7602d4f7,0xbcf46b2e,0xd4a20068,0xd4082471,0x3320f46a,0x43b7d4b7,0x500061af,0x1e39f62e,0x97244546,0x14214f74,0xbf8b8840,0x4d95fc1d,0x96b591af,0x70f4ddd3,0x66a02f45,0xbfbc09ec,0x3bd9785,0x7fac6dd0,0x31cb8504,0x96eb27b3,0x55fd3941,0xda2547e6,0xabca0a9a,0x28507825,0x530429f4,0xa2c86da,0xe9b66dfb,0x68dc1462,0xd7486900,0x680ec0a4,0x27a18dee,0x4f3ffea2,0xe887ad8c,0xb58ce006,0x7af4d6b6,0xaace1e7c,0xd3375fec,0xce78a399,0x406b2a42,0x20fe9e35,0xd9f385b9,0xee39d7ab,0x3b124e8b,0x1dc9faf7,0x4b6d1856,0x26a36631,0xeae397b2,0x3a6efa74,0xdd5b4332,0x6841e7f7,0xca7820fb,0xfb0af54e,0xd8feb397,0x454056ac,0xba489527,0x55533a3a,0x20838d87,0xfe6ba9b7,0xd096954b,0x55a867bc,0xa1159a58,0xcca92963,0x99e1db33,0xa62a4a56,0x3f3125f9,0x5ef47e1c,0x9029317c,0xfdf8e802,0x4272f70,0x80bb155c,0x5282ce3,0x95c11548,0xe4c66d22,0x48c1133f,0xc70f86dc,0x7f9c9ee,0x41041f0f,0x404779a4,0x5d886e17,0x325f51eb,0xd59bc0d1,0xf2bcc18f,0x41113564,0x257b7834,0x602a9c60,0xdff8e8a3,0x1f636c1b,0xe12b4c2,0x2e1329e,0xaf664fd1,0xcad18115,0x6b2395e0,0x333e92e1,0x3b240b62,0xeebeb922,0x85b2a20e,0xe6ba0d99,0xde720c8c,0x2da2f728,0xd0127845,0x95b794fd,0x647d0862,0xe7ccf5f0,0x5449a36f,0x877d48fa,0xc39dfd27,0xf33e8d1e,0xa476341,0x992eff74,0x3a6f6eab,0xf4f8fd37,0xa812dc60,0xa1ebddf8,0x991be14c,0xdb6e6b0d,0xc67b5510,0x6d672c37,0x2765d43b,0xdcd0e804,0xf1290dc7,0xcc00ffa3,0xb5390f92,0x690fed0b,0x667b9ffb,0xcedb7d9c,0xa091cf0b,0xd9155ea3,0xbb132f88,0x515bad24,0x7b9479bf,0x763bd6eb,0x37392eb3,0xcc115979,0x8026e297,0xf42e312d,0x6842ada7,0xc66a2b3b,0x12754ccc,0x782ef11c,0x6a124237,0xb79251e7,0x6a1bbe6,0x4bfb6350,0x1a6b1018,0x11caedfa,0x3d25bdd8,0xe2e1c3c9,0x44421659,0xa121386,0xd90cec6e,0xd5abea2a,0x64af674e,0xda86a85f,0xbebfe988,0x64e4c3fe,0x9dbc8057,0xf0f7c086,0x60787bf8,0x6003604d,0xd1fd8346,0xf6381fb0,0x7745ae04,0xd736fccc,0x83426b33,0xf01eab71,0xb0804187,0x3c005e5f,0x77a057be,0xbde8ae24,0x55464299,0xbf582e61,0x4e58f48f,0xf2ddfda2,0xf474ef38,0x8789bdc2,0x5366f9c3,0xc8b38e74,0xb475f255,0x46fcd9b9,0x7aeb2661,0x8b1ddf84,0x846a0e79,0x915f95e2,0x466e598e,0x20b45770,0x8cd55591,0xc902de4c,0xb90bace1,0xbb8205d0,0x11a86248,0x7574a99e,0xb77f19b6,0xe0a9dc09,0x662d09a1,0xc4324633,0xe85a1f02,0x9f0be8c,0x4a99a025,0x1d6efe10,0x1ab93d1d,0xba5a4df,0xa186f20f,0x2868f169,0xdcb7da83,0x573906fe,0xa1e2ce9b,0x4fcd7f52,0x50115e01,0xa70683fa,0xa002b5c4,0xde6d027,0x9af88c27,0x773f8641,0xc3604c06,0x61a806b5,0xf0177a28,0xc0f586e0,6314154,0x30dc7d62,0x11e69ed7,0x2338ea63,0x53c2dd94,0xc2c21634,0xbbcbee56,0x90bcb6de,0xebfc7da1,0xce591d76,0x6f05e409,0x4b7c0188,0x39720a3d,0x7c927c24,0x86e3725f,0x724d9db9,0x1ac15bb4,0xd39eb8fc,0xed545578,0x8fca5b5,0xd83d7cd3,0x4dad0fc4,0x1e50ef5e,0xb161e6f8,0xa28514d9,0x6c51133c,0x6fd5c7e7,0x56e14ec4,0x362abfce,0xddc6c837,0xd79a3234,0x92638212,0x670efa8e,0x406000e0,0x3a39ce37,0xd3faf5cf,0xabc27737,0x5ac52d1b,0x5cb0679e,0x4fa33742,0xd3822740,0x99bc9bbe,0xd5118e9d,0xbf0f7315,0xd62d1c7e,0xc700c47b,0xb78c1b6b,0x21a19045,0xb26eb1be,0x6a366eb4,0x5748ab2f,0xbc946e79,0xc6a376d2,0x6549c2c8,0x530ff8ee,0x468dde7d,0xd5730a1d,0x4cd04dc6,0x2939bbdb,0xa9ba4650,0xac9526e8,0xbe5ee304,0xa1fad5f0,0x6a2d519a,0x63ef8ce2,0x9a86ee22,0xc089c2b8,0x43242ef6,0xa51e03aa,0x9cf2d0a4,0x83c061ba,0x9be96a4d,0x8fe51550,0xba645bd6,0x2826a2f9,0xa73a3ae1,0x4ba99586,0xef5562e9,0xc72fefd3,0xf752f7da,0x3f046f69,0x77fa0a59,0x80e4a915,0x87b08601,0x9b09e6ad,0x3b3ee593,0xe990fd5a,0x9e34d797,0x2cf0b7d9,0x22b8b51,0x96d5ac3a,0x17da67d,0xd1cf3ed6,0x7c7d2d28,0x1f9f25cf,0xadf2b89b,0x5ad6b472,0x5a88f54c,0xe029ac71,0xe019a5e6,0x47b0acfd,0xed93fa9b,0xe8d3c48d,0x283b57cc,0xf8d56629,0x79132e28,0x785f0191,0xed756055,0xf7960e44,0xe3d35e8c,0x15056dd4,0x88f46dba,0x3a16125,0x564f0bd,0xc3eb9e15,0x3c9057a2,0x97271aec,0xa93a072a,0x1b3f6d9b,0x1e6321f5,0xf59c66fb,0x26dcf319,0x7533d928,0xb155fdf5,0x3563482,0x8aba3cbb,0x28517711,0xc20ad9f8,0xabcc5167,0xccad925f,0x4de81751,0x3830dc8e,0x379d5862,0x9320f991,0xea7a90c2,0xfb3e7bce,0x5121ce64,0x774fbe32,0xa8b6e37e,0xc3293d46,0x48de5369,0x6413e680,0xa2ae0810,0xdd6db224,0x69852dfd,0x9072166,0xb39a460a,0x6445c0dd,0x586cdecf,0x1c20c8ae,0x5bbef7dd,0x1b588d40,0xccd2017f,0x6bb4e3bb,0xdda26a7e,0x3a59ff45,0x3e350a44,0xbcb4cdd5,0x72eacea8,0xfa6484bb,0x8d6612ae,0xbf3c6f47,0xd29be463,0x542f5d9e,0xaec2771b,0xf64e6370,0x740e0d8d,0xe75b1357,0xf8721671,0xaf537d5d,0x4040cb08,0x4eb4e2cc,0x34d2466a,0x115af84,3786409e3,0x95983a1d,0x6b89fb4,0xce6ea048,0x6f3f3b82,0x3520ab82,0x11a1d4b,0x277227f8,0x611560b1,0xe7933fdc,0xbb3a792b,0x344525bd,0xa08839e1,0x51ce794b,0x2f32c9b7,0xa01fbac9,0xe01cc87e,0xbcc7d1f6,0xcf0111c3,0xa1e8aac7,0x1a908749,0xd44fbd9a,0xd0dadecb,0xd50ada38,0x339c32a,0xc6913667,0x8df9317c,0xe0b12b4f,0xf79e59b7,0x43f5bb3a,0xf2d519ff,0x27d9459c,0xbf97222c,0x15e6fc2a,0xf91fc71,0x9b941525,0xfae59361,0xceb69ceb,0xc2a86459,0x12baa8d1,0xb6c1075e,0xe3056a0c,0x10d25065,0xcb03a442,0xe0ec6e0e,0x1698db3b,0x4c98a0be,0x3278e964,0x9f1f9532,0xe0d392df,0xd3a0342b,0x8971f21e,0x1b0a7441,0x4ba3348c,0xc5be7120,0xc37632d8,0xdf359f8d,0x9b992f2e,0xe60b6f47,0xfe3f11d,0xe54cda54,0x1edad891,0xce6279cf,0xcd3e7e6f,0x1618b166,0xfd2c1d05,0x848fd2c5,0xf6fb2299,0xf523f357,0xa6327623,0x93a83531,0x56cccd02,0xacf08162,0x5a75ebb5,0x6e163697,0x88d273cc,0xde966292,0x81b949d0,0x4c50901b,0x71c65614,0xe6c6c7bd,0x327a140a,0x45e1d006,0xc3f27b9a,0xc9aa53fd,0x62a80f00,0xbb25bfe2,0x35bdd2f6,0x71126905,0xb2040222,0xb6cbcf7c,0xcd769c2b,0x53113ec0,0x1640e3d3,0x38abbd60,0x2547adf0,0xba38209c,0xf746ce76,0x77afa1c5,0x20756060,0x85cbfe4e,0x8ae88dd8,0x7aaaf9b0,0x4cf9aa7e,0x1948c25c,0x2fb8a8c,0x1c36ae4,0xd6ebe1f9,0x90d4f869,0xa65cdea0,0x3f09252d,0xc208e69f,0xb74e6132,0xce77e25b,0x578fdfe3,0x3ac372e6],b=[0x4f727068,0x65616e42,0x65686f6c,0x64657253,0x63727944,0x6f756274];function g(e,t,i,s){var r,n=e[t],a=e[t+1];return n^=i[0],a^=(s[n>>>24]+s[256|n>>16&255]^s[512|n>>8&255])+s[768|255&n]^i[1],n^=(s[a>>>24]+s[256|a>>16&255]^s[512|a>>8&255])+s[768|255&a]^i[2],a^=(s[n>>>24]+s[256|n>>16&255]^s[512|n>>8&255])+s[768|255&n]^i[3],n^=(s[a>>>24]+s[256|a>>16&255]^s[512|a>>8&255])+s[768|255&a]^i[4],a^=(s[n>>>24]+s[256|n>>16&255]^s[512|n>>8&255])+s[768|255&n]^i[5],n^=(s[a>>>24]+s[256|a>>16&255]^s[512|a>>8&255])+s[768|255&a]^i[6],a^=(s[n>>>24]+s[256|n>>16&255]^s[512|n>>8&255])+s[768|255&n]^i[7],n^=(s[a>>>24]+s[256|a>>16&255]^s[512|a>>8&255])+s[768|255&a]^i[8],a^=(s[n>>>24]+s[256|n>>16&255]^s[512|n>>8&255])+s[768|255&n]^i[9],n^=(s[a>>>24]+s[256|a>>16&255]^s[512|a>>8&255])+s[768|255&a]^i[10],a^=(s[n>>>24]+s[256|n>>16&255]^s[512|n>>8&255])+s[768|255&n]^i[11],n^=(s[a>>>24]+s[256|a>>16&255]^s[512|a>>8&255])+s[768|255&a]^i[12],a^=(s[n>>>24]+s[256|n>>16&255]^s[512|n>>8&255])+s[768|255&n]^i[13],n^=(s[a>>>24]+s[256|a>>16&255]^s[512|a>>8&255])+s[768|255&a]^i[14],a^=(s[n>>>24]+s[256|n>>16&255]^s[512|n>>8&255])+s[768|255&n]^i[15],n^=(s[a>>>24]+s[256|a>>16&255]^s[512|a>>8&255])+s[768|255&a]^i[16],e[t]=a^i[17],e[t+1]=n,e}function p(e,t){for(var i=0,s=0;i<4;++i)s=s<<8|255&e[t],t=(t+1)%e.length;return{key:s,offp:t}}function m(e,t,i){for(var s,r=0,n=[0,0],a=t.length,l=i.length,o=0;o<a;o++)r=(s=p(e,r)).offp,t[o]=t[o]^s.key;for(o=0;o<a;o+=2)n=g(n,0,t,i),t[o]=n[0],t[o+1]=n[1];for(o=0;o<l;o+=2)n=g(n,0,t,i),i[o]=n[0],i[o+1]=n[1]}function y(e,t,i,s,r){var n,a,o=b.slice(),c=o.length;if(i<4||i>31){if(a=Error("Illegal number of rounds (4-31): "+i),s)return void l(s.bind(this,a));throw a}if(t.length!==d){if(a=Error("Illegal salt length: "+t.length+" != "+d),s)return void l(s.bind(this,a));throw a}i=1<<i>>>0;var u,f,y,w=0;function v(){if(r&&r(w/i),w<i)for(var n=Date.now();w<i&&(w+=1,m(e,u,f),m(t,u,f),!(Date.now()-n>100)););else{for(w=0;w<64;w++)for(y=0;y<c>>1;y++)g(o,y<<1,u,f);var a=[];for(w=0;w<c;w++)a.push((o[w]>>24&255)>>>0),a.push((o[w]>>16&255)>>>0),a.push((o[w]>>8&255)>>>0),a.push((255&o[w])>>>0);return s?void s(null,a):a}s&&l(v)}if("function"==typeof Int32Array?(u=new Int32Array(h),f=new Int32Array(x)):(u=h.slice(),f=x.slice()),!function(e,t,i,s){for(var r,n=0,a=[0,0],l=i.length,o=s.length,c=0;c<l;c++)n=(r=p(t,n)).offp,i[c]=i[c]^r.key;for(c=0,n=0;c<l;c+=2)n=(r=p(e,n)).offp,a[0]^=r.key,n=(r=p(e,n)).offp,a[1]^=r.key,a=g(a,0,i,s),i[c]=a[0],i[c+1]=a[1];for(c=0;c<o;c+=2)n=(r=p(e,n)).offp,a[0]^=r.key,n=(r=p(e,n)).offp,a[1]^=r.key,a=g(a,0,i,s),s[c]=a[0],s[c+1]=a[1]}(t,e,u,f),void 0!==s)v();else for(;;)if(void 0!==(n=v()))return n||[]}function w(e,t,i,s){if("string"!=typeof e||"string"!=typeof t){if(r=Error("Invalid string / salt: Not a string"),i)return void l(i.bind(this,r));throw r}if("$"!==t.charAt(0)||"2"!==t.charAt(1)){if(r=Error("Invalid salt version: "+t.substring(0,2)),i)return void l(i.bind(this,r));throw r}if("$"===t.charAt(2))n="\0",a=3;else{if("a"!==(n=t.charAt(2))&&"b"!==n&&"y"!==n||"$"!==t.charAt(3)){if(r=Error("Invalid salt revision: "+t.substring(2,4)),i)return void l(i.bind(this,r));throw r}a=4}if(t.charAt(a+2)>"$"){if(r=Error("Missing salt rounds"),i)return void l(i.bind(this,r));throw r}var r,n,a,o=10*parseInt(t.substring(a,a+1),10)+parseInt(t.substring(a+1,a+2),10),f=t.substring(a+3,a+25),h=function(e){for(var t,i,s=0,r=Array(function(e){for(var t=0,i=0,s=0;s<e.length;++s)(i=e.charCodeAt(s))<128?t+=1:i<2048?t+=2:(64512&i)==55296&&(64512&e.charCodeAt(s+1))==56320?(++s,t+=4):t+=3;return t}(e)),n=0,a=e.length;n<a;++n)(t=e.charCodeAt(n))<128?r[s++]=t:(t<2048?r[s++]=t>>6|192:((64512&t)==55296&&(64512&(i=e.charCodeAt(n+1)))==56320?(t=65536+((1023&t)<<10)+(1023&i),++n,r[s++]=t>>18|240,r[s++]=t>>12&63|128):r[s++]=t>>12|224,r[s++]=t>>6&63|128),r[s++]=63&t|128);return r}(e+=n>="a"?"\0":""),x=function(e,t){var i,s,r,n,a,l=0,o=e.length,u=0,d=[];if(t<=0)throw Error("Illegal len: "+t);for(;l<o-1&&u<t&&(i=(a=e.charCodeAt(l++))<c.length?c[a]:-1,s=(a=e.charCodeAt(l++))<c.length?c[a]:-1,-1!=i&&-1!=s)&&(n=i<<2>>>0|(48&s)>>4,d.push(String.fromCharCode(n)),!(++u>=t||l>=o||-1==(r=(a=e.charCodeAt(l++))<c.length?c[a]:-1)||(n=(15&s)<<4>>>0|(60&r)>>2,d.push(String.fromCharCode(n)),++u>=t||l>=o)));){;n=(3&r)<<6>>>0|((a=e.charCodeAt(l++))<c.length?c[a]:-1),d.push(String.fromCharCode(n)),++u}var f=[];for(l=0;l<u;l++)f.push(d[l].charCodeAt(0));return f}(f,d);function g(e){var t=[];return t.push("$2"),n>="a"&&t.push(n),t.push("$"),o<10&&t.push("0"),t.push(o.toString()),t.push("$"),t.push(u(x,x.length)),t.push(u(e,4*b.length-1)),t.join("")}if(void 0===i)return g(y(h,x,o));y(h,x,o,function(e,t){e?i(e,null):i(null,g(t))},s)}},86214:(e,t,i)=>{i.d(t,{E:()=>s});let s=Symbol.for("drizzle:Name")},86901:(e,t,i)=>{i.d(t,{Pv:()=>a,w:()=>n});var s=i(5730);class r{static [s.i]="ConsoleLogWriter";write(e){console.log(e)}}class n{static [s.i]="DefaultLogger";writer;constructor(e){this.writer=e?.writer??new r}logQuery(e,t){let i=t.map(e=>{try{return JSON.stringify(e)}catch{return String(e)}}),s=i.length?` -- params: [${i.join(", ")}]`:"";this.writer.write(`Query: ${e}${s}`)}}class a{static [s.i]="NoopLogger";logQuery(){}}},88520:(e,t,i)=>{i.d(t,{Th:()=>n,h1:()=>a});var s=i(5730);class r{static [s.i]="Cache"}class n extends r{strategy(){return"all"}static [s.i]="NoopCache";async get(e){}async put(e,t,i,s){}async onMutate(e){}}async function a(e,t){let i=`${e}-${JSON.stringify(t)}`,s=new TextEncoder().encode(i);return[...new Uint8Array(await crypto.subtle.digest("SHA-256",s))].map(e=>e.toString(16).padStart(2,"0")).join("")}},88544:(e,t,i)=>{i.d(t,{BU:()=>o,rL:()=>d});var s=i(5730),r=i(51024);class n extends r.pe{static [s.i]="PgEnumObjectColumnBuilder";constructor(e,t){super(e,"string","PgEnumObjectColumn"),this.config.enum=t}build(e){return new a(e,this.config)}}class a extends r.Kl{static [s.i]="PgEnumObjectColumn";enum;enumValues=this.config.enum.enumValues;constructor(e,t){super(e,t),this.enum=t.enum}getSQLType(){return this.enum.enumName}}let l=Symbol.for("drizzle:isPgEnum");function o(e){return!!e&&"function"==typeof e&&l in e&&!0===e[l]}class c extends r.pe{static [s.i]="PgEnumColumnBuilder";constructor(e,t){super(e,"string","PgEnumColumn"),this.config.enum=t}build(e){return new u(e,this.config)}}class u extends r.Kl{static [s.i]="PgEnumColumn";enum=this.config.enum;enumValues=this.config.enum.enumValues;constructor(e,t){super(e,t),this.enum=t.enum}getSQLType(){return this.enum.enumName}}function d(e,t){return Array.isArray(t)?function(e,t,i){let s=Object.assign(e=>new c(e??"",s),{enumName:e,enumValues:t,schema:i,[l]:!0});return s}(e,[...t],void 0):function(e,t,i){let s=Object.assign(e=>new n(e??"",s),{enumName:e,enumValues:Object.values(t),schema:i,[l]:!0});return s}(e,t,void 0)}},89685:(e,t,i)=>{i.d(t,{Hs:()=>h,Ht:()=>o,h_:()=>c,oG:()=>d,ug:()=>f,yY:()=>x});var s=i(10007),r=i(5730),n=i(42270),a=i(24717),l=i(12772);class o{constructor(e){this.table=e}static [r.i]="ColumnAliasProxyHandler";get(e,t){return"table"===t?this.table:e[t]}}class c{constructor(e,t){this.alias=e,this.replaceOriginalName=t}static [r.i]="TableAliasProxyHandler";get(e,t){if(t===a.XI.Symbol.IsAlias)return!0;if(t===a.XI.Symbol.Name||this.replaceOriginalName&&t===a.XI.Symbol.OriginalName)return this.alias;if(t===l.n)return{...e[l.n],name:this.alias,isAlias:!0};if(t===a.XI.Symbol.Columns){let t=e[a.XI.Symbol.Columns];if(!t)return t;let i={};return Object.keys(t).map(s=>{i[s]=new Proxy(t[s],new o(new Proxy(e,this)))}),i}let i=e[t];return(0,r.is)(i,s.V)?new Proxy(i,new o(new Proxy(e,this))):i}}class u{constructor(e){this.alias=e}static [r.i]=null;get(e,t){return"sourceTable"===t?d(e.sourceTable,this.alias):e[t]}}function d(e,t){return new Proxy(e,new c(t,!1))}function f(e,t){return new Proxy(e,new o(new Proxy(e.table,new c(t,!1))))}function h(e,t){return new n.Xs.Aliased(x(e.sql,t),e.fieldAlias)}function x(e,t){return n.ll.join(e.queryChunks.map(e=>(0,r.is)(e,s.V)?f(e,t):(0,r.is)(e,n.Xs)?x(e,t):(0,r.is)(e,n.Xs.Aliased)?h(e,t):e))}},89697:(e,t,i)=>{i.d(t,{GL:()=>u,Pe:()=>c});var s=i(42270),r=i(5730),n=i(51024);class a{constructor(e,t){this.unique=e,this.name=t}static [r.i]="PgIndexBuilderOn";on(...e){return new l(e.map(e=>{if((0,r.is)(e,s.Xs))return e;let t=new n.ae(e.name,!!e.keyAsName,e.columnType,e.indexConfig);return e.indexConfig=JSON.parse(JSON.stringify(e.defaultConfig)),t}),this.unique,!1,this.name)}onOnly(...e){return new l(e.map(e=>{if((0,r.is)(e,s.Xs))return e;let t=new n.ae(e.name,!!e.keyAsName,e.columnType,e.indexConfig);return e.indexConfig=e.defaultConfig,t}),this.unique,!0,this.name)}using(e,...t){return new l(t.map(e=>{if((0,r.is)(e,s.Xs))return e;let t=new n.ae(e.name,!!e.keyAsName,e.columnType,e.indexConfig);return e.indexConfig=JSON.parse(JSON.stringify(e.defaultConfig)),t}),this.unique,!0,this.name,e)}}class l{static [r.i]="PgIndexBuilder";config;constructor(e,t,i,s,r="btree"){this.config={name:s,columns:e,unique:t,only:i,method:r}}concurrently(){return this.config.concurrently=!0,this}with(e){return this.config.with=e,this}where(e){return this.config.where=e,this}build(e){return new o(this.config,e)}}class o{static [r.i]="PgIndex";config;constructor(e,t){this.config={...e,table:t}}}function c(e){return new a(!1,e)}function u(e){return new a(!0,e)}},94634:(e,t,i)=>{i.d(t,{AU:()=>f,B3:()=>C,KJ:()=>S,KL:()=>m,Pe:()=>w,RK:()=>P,RO:()=>x,RV:()=>p,Tq:()=>T,Uo:()=>u,eq:()=>o,gt:()=>h,kZ:()=>y,lt:()=>b,mj:()=>N,ne:()=>c,o8:()=>$,or:()=>d,q1:()=>q,t2:()=>v,wJ:()=>g});var s=i(10007),r=i(5730),n=i(24717),a=i(42270);function l(e,t){return!(0,a.eG)(t)||(0,a.qt)(e)||(0,r.is)(e,a.Iw)||(0,r.is)(e,a.Or)||(0,r.is)(e,s.V)||(0,r.is)(e,n.XI)||(0,r.is)(e,a.Ss)?e:new a.Iw(e,t)}let o=(e,t)=>(0,a.ll)`${e} = ${l(t,e)}`,c=(e,t)=>(0,a.ll)`${e} <> ${l(t,e)}`;function u(...e){let t=e.filter(e=>void 0!==e);if(0!==t.length)return new a.Xs(1===t.length?t:[new a.DJ("("),a.ll.join(t,new a.DJ(" and ")),new a.DJ(")")])}function d(...e){let t=e.filter(e=>void 0!==e);if(0!==t.length)return new a.Xs(1===t.length?t:[new a.DJ("("),a.ll.join(t,new a.DJ(" or ")),new a.DJ(")")])}function f(e){return(0,a.ll)`not ${e}`}let h=(e,t)=>(0,a.ll)`${e} > ${l(t,e)}`,x=(e,t)=>(0,a.ll)`${e} >= ${l(t,e)}`,b=(e,t)=>(0,a.ll)`${e} < ${l(t,e)}`,g=(e,t)=>(0,a.ll)`${e} <= ${l(t,e)}`;function p(e,t){return Array.isArray(t)?0===t.length?(0,a.ll)`false`:(0,a.ll)`${e} in ${t.map(t=>l(t,e))}`:(0,a.ll)`${e} in ${l(t,e)}`}function m(e,t){return Array.isArray(t)?0===t.length?(0,a.ll)`true`:(0,a.ll)`${e} not in ${t.map(t=>l(t,e))}`:(0,a.ll)`${e} not in ${l(t,e)}`}function y(e){return(0,a.ll)`${e} is null`}function w(e){return(0,a.ll)`${e} is not null`}function v(e){return(0,a.ll)`exists ${e}`}function S(e){return(0,a.ll)`not exists ${e}`}function T(e,t,i){return(0,a.ll)`${e} between ${l(t,e)} and ${l(i,e)}`}function $(e,t,i){return(0,a.ll)`${e} not between ${l(t,e)} and ${l(i,e)}`}function N(e,t){return(0,a.ll)`${e} like ${t}`}function P(e,t){return(0,a.ll)`${e} not like ${t}`}function C(e,t){return(0,a.ll)`${e} ilike ${t}`}function q(e,t){return(0,a.ll)`${e} not ilike ${t}`}},99511:(e,t,i)=>{let s,r;i.d(t,{k:()=>a});var n=i(69167);let a={startActiveSpan:(e,t)=>s?(r||(r=s.trace.getTracer("drizzle-orm","0.44.2")),(0,n.i)((i,s)=>s.startActiveSpan(e,e=>{try{return t(e)}catch(t){throw e.setStatus({code:i.SpanStatusCode.ERROR,message:t instanceof Error?t.message:"Unknown error"}),t}finally{e.end()}}),s,r)):t()}}};